<!DOCTYPE html>
<html lang="zh" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>C&#43;&#43;编程入门：类和对象-封装 | Eddy&#39;s blog</title>
<meta name="keywords" content="CPP Programming, 引用">
<meta name="description" content="INIT INIT：本节内容正式开始。action! 4 类和对象 C&#43;&#43;面向对象的三大特性为：封装、继承、多态。 C&#43;&#43;认为万事万物都皆为对象，对象上有其属性和行为。 例如： 人可以作为对象，属性有姓名、年龄、身高、体重&hellip;，行为有走、跑、跳、吃饭、唱歌&hellip;。 车也可以作为对">
<meta name="author" content="Eddy">
<link rel="canonical" href="https://eddyblog.cn/posts/tech/cpp-programming-p4/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.css" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.js" onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://eddyblog.cn/img/logo3.jpg">
<link rel="icon" type="image/png" sizes="16x16" href="https://eddyblog.cn/img/logo3.jpg">
<link rel="icon" type="image/png" sizes="32x32" href="https://eddyblog.cn/img/logo3.jpg">
<link rel="apple-touch-icon" href="https://eddyblog.cn/img/logo3.jpg">
<link rel="mask-icon" href="https://eddyblog.cn/img/logo3.jpg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="zh" href="https://eddyblog.cn/posts/tech/cpp-programming-p4/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
<script defer src="https://unpkg.com/mermaid@8.8.1/dist/mermaid.min.js"></script>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css">
<script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.6.3/dist/jquery.min.js"></script>


<link rel="stylesheet" href="https://registry.npmmirror.com/lxgw-wenkai-screen-web/latest/files/style.css" />





<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = ""; 
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

  

<meta property="og:title" content="C&#43;&#43;编程入门：类和对象-封装" />
<meta property="og:description" content="INIT INIT：本节内容正式开始。action! 4 类和对象 C&#43;&#43;面向对象的三大特性为：封装、继承、多态。 C&#43;&#43;认为万事万物都皆为对象，对象上有其属性和行为。 例如： 人可以作为对象，属性有姓名、年龄、身高、体重&hellip;，行为有走、跑、跳、吃饭、唱歌&hellip;。 车也可以作为对" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://eddyblog.cn/posts/tech/cpp-programming-p4/" />
<meta property="og:image" content="https://testingcf.jsdelivr.net/gh/EddyCliff/ChartBed/BlogCover/CPP.png" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-04-30T00:17:58+09:00" />
<meta property="article:modified_time" content="2024-04-30T00:17:58+09:00" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://testingcf.jsdelivr.net/gh/EddyCliff/ChartBed/BlogCover/CPP.png" />
<meta name="twitter:title" content="C&#43;&#43;编程入门：类和对象-封装"/>
<meta name="twitter:description" content="INIT INIT：本节内容正式开始。action! 4 类和对象 C&#43;&#43;面向对象的三大特性为：封装、继承、多态。 C&#43;&#43;认为万事万物都皆为对象，对象上有其属性和行为。 例如： 人可以作为对象，属性有姓名、年龄、身高、体重&hellip;，行为有走、跑、跳、吃饭、唱歌&hellip;。 车也可以作为对"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [

        {
          "@type": "ListItem",
          "position":  1 ,
          "name": "📚文章",
          "item": "https://eddyblog.cn/posts/"
        },

        {
          "@type": "ListItem",
          "position":  2 ,
          "name": "👨🏻‍💻 技术",
          "item": "https://eddyblog.cn/posts/tech/"
        }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "C++编程入门：类和对象-封装",
      "item": "https://eddyblog.cn/posts/tech/cpp-programming-p4/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "C++编程入门：类和对象-封装",
  "name": "C\u002b\u002b编程入门：类和对象-封装",
  "description": "INIT INIT：本节内容正式开始。action! 4 类和对象 C++面向对象的三大特性为：封装、继承、多态。 C++认为万事万物都皆为对象，对象上有其属性和行为。 例如： 人可以作为对象，属性有姓名、年龄、身高、体重\u0026hellip;，行为有走、跑、跳、吃饭、唱歌\u0026hellip;。 车也可以作为对",
  "keywords": [
    "CPP Programming", "引用"
  ],
  "articleBody": " INIT INIT：本节内容正式开始。action!\n4 类和对象 C++面向对象的三大特性为：封装、继承、多态。\nC++认为万事万物都皆为对象，对象上有其属性和行为。\n例如：\n人可以作为对象，属性有姓名、年龄、身高、体重…，行为有走、跑、跳、吃饭、唱歌…。\n车也可以作为对象，属性有轮胎、方向盘、车灯…,行为有载人、放音乐、放空调…。\n具有相同性质的对象，我们可以抽象称为类，人属于人类，车属于车类。\n4.1 封装 4.1.1 封装的意义 封装是C++面向对象三大特性之一。\n封装的意义：\n将属性和行为作为一个整体，表现生活中的事物。\n将属性和行为加以权限控制。\n封装意义一：\n在设计类的时候，属性和行为写在一起，表现事物。\n语法： class 类名{ 访问权限： 属性 / 行为 };\n**示例1：**设计一个圆类，求圆的周长。\n示例代码\n#include using namespace std; const double PI = 3.14; //设计一个圆类，求圆的周长 //圆求周长的公式:2 * PI * 半径 //class代表设计一个类，类后面紧跟着的是类名称 class Circle { //访问权限 //公共权限 public: //属性 //半径 int m_r; //行为 //获取圆的周长 double calculatrZC() { return 2 * PI * m_r; } }; int main() { //通过圆类 创建具体的圆(对象) //实例化(通过一个类 创建一个对象的过程) Circle c1; //给圆对象 的属性进行赋值 c1.m_r = 10; //2 * PI * 10 = 62.8 cout \u003c\u003c \"圆的周长为：\" \u003c\u003c c1.calculatrZC() \u003c\u003c endl; system(\"pause\"); return 0; } 运行结果\n圆的周长为：62.8 **示例2：**设计一个学生类，属性有姓名和学号，可以给姓名和学号赋值，可以显示学生的姓名和学号。\n示例代码\n#include #include using namespace std; //类中的属性和行为 我们统一称为 成员 // 属性 成员属性 成员变量 // 行为 成员函数 成员方法 class Student { //权限 public: //属性 string m_name; //姓名 int m_Id; //学号 //行为 //显示姓名和学号 void showStudent() { cout \u003c\u003c \"姓名：\" \u003c\u003c m_name \u003c\u003c \" 学号：\" \u003c\u003c m_Id \u003c\u003c endl; } //给学生信息赋值 void setStudent(string name,int id) { m_name = name; m_Id = id; } }; int main() { //创建一个具体学生 实例化对象 Student s1; //给s1对象 进行属性赋值操作 s1.m_name = \"张三\"; s1.m_Id = 10; //显示学生信息 s1.showStudent(); Student s2; s2.setStudent(\"李四\", 20); s2.showStudent(); system(\"pause\"); return 0; } 运行结果\n姓名：张三 学号：10 姓名：李四 学号：20 封装意义二：\n类在设计时，可以把属性和行为放在不同的权限下，加以控制。\n访问权限有三种：\npublic 公共权限\nprotected 保护权限\nprivate 私有权限\n示例代码\n#include #include using namespace std; //访问权限 //三种 //公共权限 public 成员 类内可以访问 类外可以访问 //保护权限 protected 成员 类内可以访问 类外不可以访问 儿子可以访问父亲中的访问内容 //私有权限 private 成员 类内可以访问 类外不可以访问 儿子不可以访问父亲的私有内容 class Person { public: //公共权限 string m_Name; //姓名 protected: //保护权限 string m_Car; //汽车 private: //私有权限 int m_Password; //银行卡密码 public: void func() { m_Name = \"张三\"; m_Car = \"拖拉机\"; m_Password = 123456; } }; int main() { Person p1; p1.m_Name = \"李四\"; //p1.m_Car = \"奔驰\"; //保护去权限内容，在类外访问不到 //p1.m_Password = 123; //私有权限内容，类外访问不到 system(\"pause\"); return 0; } 4.1.2 struct和class区别 在C++中 struct和class唯一的区别就在于 默认的访问权限不同。\n区别：\nstruct 默认权限为公共\nclass 默认权限为私有\n示例代码\n#include using namespace std; //strcut 和class的区别 //struct 默认权限是 public //public 默认权限是 private class C1 { int m_A; //默认权限 是私有 }; struct C2 { int m_A; //默认权限 是公有 }; int main() { C1 c1; // c1.m_A = 100; //在class里默认权限为私有 ，因此类外不可以访问 C2 c2; c2.m_A = 100; //在struct默认的权限为公共，因此可以访问 system(\"pause\"); return 0; } 4.1.3 成员属性设置为私有 **优点1：**将所有成员属性设置为私有，可以自己控制读写权限\n**优点2：**对于写权限，我们可以检测数据的有效性\n示例代码\n#include #include using namespace std; //成员属性设置私有 //1、可以自己控制读写权限 //2、对于写可以检测数据有效性 //人类 class Person { public: //设置姓名 void setName(string name) { m_Name = name; } //获取姓名 string getName() { return m_Name; } //获取年龄 int getAge() { return m_Age;\t} //设置年龄 0~150之间 void setAge(int age) { if (age \u003c 0 || age \u003e 150) { cout \u003c\u003c \"年龄\" \u003c\u003c age \u003c\u003c \"输入有误，赋值失败\" \u003c\u003c endl; return; } m_Age = age; } //设置偶像 void setIdol(string idol) { m_Idol = idol; } private: string m_Name; //姓名 可读可写 int m_Age = 20; //年龄 只读 也可以写 要求年龄在0~150之间 string m_Idol; //偶像 只写 }; int main() { Person p; //姓名设置 p.setName(\"张三\"); cout \u003c\u003c \"姓名：\" \u003c\u003c p.getName() \u003c\u003c endl; //年龄设置 p.setAge(160); //年龄获取 cout \u003c\u003c \"年龄：\" \u003c\u003c p.getAge() \u003c\u003c endl; //偶像设置 p.setIdol(\"张曼玉\"); //偶像只可写入 不可读取 system(\"pause\"); return 0; } 运行结果\n姓名：张三 年龄160输入有误，赋值失败 年龄：20 练习案例1：设计立方体类\n设计立方体类(Cube)\n求出立方体的面积和体积\n分别用全局函数和成员函数判断两个立方体是否相等。\n思路：\n1）创建立方体类\n2）设计属性 长，高，宽\n3）设计行为 获取立方体面积和体积\n4）分别利用全局函数和成员函数 判断两个立方体是否相等\n示例代码\n#include using namespace std; //立方体类设计 //1、创建立方体类 //2、设计属性 //3、设计行为 获取立方体面积和体积 //4、分别利用全局函数和成员函数 判断两个立方体是否相等 class Cube { public: //设置长 void setL(int l) { m_L = l; } //获取长 int getL() { return m_L; } //设置宽 void setW(int w) { m_W = w; } //获取宽 int getW() { return m_W; } //设置高 void setH(int h) { m_H = h; } //获取高 int getH() { return m_H; } //获取立方体面积 int caculateS() { return (2 * m_L * m_W) + (2 * m_H * m_W) + (2 * m_L * m_H); } //获取立方体体积 int caculateV() { return m_L * m_W * m_H; } //利用成员函数判断两个立方体是否相等 bool isSameByClass(Cube \u0026c) { if (m_L == c.getL() \u0026\u0026 m_W == c.getW() \u0026\u0026 m_L == c.getL()) { return true; } else return false; } private: int m_L; //长 int m_W; //宽 int m_H; //高 }; //利用全局函数判断 两个立方体是否相等 bool isSame(Cube \u0026c1,Cube \u0026c2) { if (c1.getL() == c2.getL() \u0026\u0026 c1.getW() == c1.getW() \u0026\u0026 c1.getH() == c2.getH()) { return true; } else return false; } int main() { //创建立方体对象 Cube c1; c1.setL(10); c1.setW(10); c1.setH(10); cout \u003c\u003c \"c1的面积为：\" \u003c\u003c c1.caculateS() \u003c\u003c endl; cout \u003c\u003c \"c1的体积为：\" \u003c\u003c c1.caculateV() \u003c\u003c endl; //创建第二个立方体 Cube c2; c2.setL(10); c2.setW(10); c2.setH(10); cout \u003c\u003c \"c2的面积为：\" \u003c\u003c c2.caculateS() \u003c\u003c endl; cout \u003c\u003c \"c2的体积为：\" \u003c\u003c c2.caculateV() \u003c\u003c endl; bool ret = isSame(c1, c2); if (ret) { cout \u003c\u003c \"c1和c2是相等的\" \u003c\u003c endl; } else { cout \u003c\u003c \"c1和c2是不相等的\" \u003c\u003c endl; } //利用成员函数判断 ret = c1.isSameByClass(c2); if (ret) { cout \u003c\u003c \"成员函数判断：c1和c2是相等的\" \u003c\u003c endl; } else { cout \u003c\u003c \"成员函数判断：c1和c2是不相等的\" \u003c\u003c endl; } system(\"pause\"); return 0; } 运行结果\nc1的面积为：600 c1的体积为：1000 c2的面积为：600 c2的体积为：1000 c1和c2是相等的 成员函数判断：c1和c2是相等的 练习案例2：点和圆的关系\n设计一个圆形类（Circle），和一个点类（Point），计算点和圆的关系。\n思路：\n1）创建点类point.h和point.cpp\n2）创建圆类circle.h和circle.cpp\n3）点和圆的关系判断void isIncircle(Circle \u0026c,Point \u0026p)\n点到圆心的距离 == 圆心 （点在圆上）\n点到圆心的距离 \u003c 圆心 （点在圆内）\n点到圆心的距离 \u003e 圆心 （点在圆外）\n示例代码\n我们将点类用point.cpp和point.h实现。将圆类用circle.cpp和circle.h实现。\n点类头文件point.h\n#pragma once #include using namespace std; class Point { public: //设置x坐标 void setX(int x); //读取x坐标 int getX(); //设置y坐标 void setY(int y); //读取y坐标 int getY(); private: int m_x; int m_y; }; 点类代码实现point.c\n#include\"point.h\" //设置x坐标 void Point::setX(int x) { m_x = x; } //读取x坐标 int Point::getX() { return m_x; } //设置y坐标 void Point::setY(int y) { m_y = y; } //读取y坐标 int Point::getY() { return m_y; } 圆类头文件circle.h\n#pragma once #include #include\"point.h\" using namespace std; class Circle { public: //设置半径 void setR(int r); //读取半径 int getR(); //设置圆心 void setCenter(Point center); //获取圆心 Point getCenter(); private: int m_R; //半径 //在类中可以让另一个类，作为本类中的成员 Point m_center; //圆心 }; 圆类代码实现circle.cpp\n#include\"circle.h\" //设置半径 void Circle::setR(int r) { m_R = r; } //读取半径 int Circle::getR() { return m_R; } //设置圆心 void Circle::setCenter(Point center) { m_center = center; } //获取圆心 Point Circle::getCenter() { return m_center; } 主文件点和圆的关系.cpp\n#include #include\"circle.h\" #include\"point.h\" using namespace std; //点和圆的关系案例 //判断点和圆的关系 void isIncircle(Circle \u0026c,Point \u0026p) { //计算两点距离的平方 int dist = (c.getCenter().getX() - p.getX()) * (c.getCenter().getX() - p.getX()) + (c.getCenter().getY() - p.getY()) * (c.getCenter().getY() - p.getY()); //计算半径的平方 int rDistance = c.getR() * c.getR(); //判断两点距离的平方和半径的平方的关系 if (dist == rDistance) { cout \u003c\u003c \"点在圆上\" \u003c\u003c endl; } else if (dist \u003e rDistance) { cout \u003c\u003c \"点在圆外\" \u003c\u003c endl; } else { cout \u003c\u003c \"点在圆内\" \u003c\u003c endl; } } int main() { //创建圆 Circle c1; c1.setR(10); Point center; center.setX(10); center.setY(0); c1.setCenter(center); //创建点 Point p1; p1.setX(10); p1.setY(9); Point p2; p2.setX(10); p2.setY(10); Point p3; p3.setX(10); p3.setY(11); //判断关系 isIncircle(c1, p1); isIncircle(c1, p2); isIncircle(c1, p3); system(\"pause\"); return 0; } 运行结果\n我们设置了一个圆，圆心为（10,0），半径为10。 我们设置了三个点（10,9）（10,10）（10,11）。\n点在圆内 点在圆上 点在圆外 4.2 对象的初始化和清理 生活中我们买的电子产品都基本会有出厂设置，在某一天我们不用时候也会删除一些自己信息数据保证安全。\nC++中的面向对象来源于生活，每个对象也都会有初始设置以及 对象销毁前的清理数据的设置。\n4.2.1 构造函数和析构函数 对象的初始化和清理也是两个非常重要的安全问题。\n一个对象或者变量没有初始状态，对其使用后果是未知。\n同样的使用完一个对象或变量，没有及时清理，也会造成一定的安全问题。\nc++利用了构造函数和析构函数解决上述问题，这两个函数将会被编译器自动调用，完成对象初始化和清理工作。\n对象的初始化和清理工作是编译器强制要我们做的事情，因此如果我们不提供构造和析构，编译器会提供\n编译器提供的构造函数和析构函数是空实现。\n构造函数：主要作用在于创建对象时为对象的成员属性赋值，构造函数由编译器自动调用，无须手动调用。\n析构函数：主要作用在于对象销毁前系统自动调用，执行一些清理工作。\n构造函数语法：类名(){}\n构造函数，没有返回值也不写void\n函数名称与类名相同\n构造函数可以有参数，因此可以发生重载\n程序在调用对象时候会自动调用构造，无须手动调用,而且只会调用一次\n析构函数语法： ~类名(){}\n析构函数，没有返回值也不写void\n函数名称与类名相同,在名称前加上符号 ~\n析构函数不可以有参数，因此不可以发生重载\n程序在对象销毁前会自动调用析构，无须手动调用,而且只会调用一次\n示例代码\n#include using namespace std; //对象的初始化和清理 //1、构造函数 进行初始化操作 //2、析构函数 进行清理的操作 class Person { public: //1.1、构造函数 //没有返回值 不用void //函数名 与类名称相同 //构造函数可以有参数，可以发生重载 //创建对象的时候，构造函数会自动调用，且只调用一次 Person() { cout \u003c\u003c \"Person 构造函数的调用\" \u003c\u003c endl; } //1.2、析构函数 //没有返回值 不写void //函数名和类名相同 在名称前加~ //析构函数不可以有参数，不可以发生重载 //对象销毁前 会自动调用析构函数 而且只会调用一次 ~Person() { cout \u003c\u003c \"Person 析构函数的调用\" \u003c\u003c endl; } }; void test01() { Person P; } int main() { test01(); system(\"pause\"); return 0; } 运行结果\nPerson 构造函数的调用 Person 析构函数的调用 4.2.2 构造函数的分类及调用 两种分类方式：\n1）按参数分为： 有参构造和无参构造\n2）按类型分为： 普通构造和拷贝构造\n三种调用方式：\n1）括号法\n2）显示法\n3）隐式转换法\n构造函数的分类\n#include using namespace std; //1构造函数的分类及调用 //分类 //按照参数分类 无参构造(默认构造) 和 有参构造 //按照类型分类 普通构造 和 拷贝构造 class Person { public: int age; //构造函数 Person() { cout \u003c\u003c \"Person 无参构造函数的调用\" \u003c\u003c endl; } //有参构造函数 Person(int a) { age = a; cout \u003c\u003c \"Person 有参构造函数的调用\" \u003c\u003c endl; } //拷贝构造函数 Person(const Person \u0026p) { //将传入的人身上的所有属性，拷贝在我的身上 age = p.age; cout \u003c\u003c \"Person 拷贝构造函数的调用\" \u003c\u003c endl; } //析构函数 ~Person() { cout \u003c\u003c \"Person 析构函数的调用\" \u003c\u003c endl; } }; 构造函数的调用\n1）构造函数的调用：括号法\nvoid test01() { //1、括号法 Person p1; //默认构造函数的调用 Person p2(10); //有参构造函数的调用 Person p3(p2); //拷贝构造函数的调用 //注意事项1 //调用默认构造函数时候，不用加() //因为下面这行代码，编译器会认为是一个函数的声明 //Person p1(); cout \u003c\u003c \"p2的年龄为：\" \u003c\u003c p2.age \u003c\u003c endl; cout \u003c\u003c \"p3的年龄为：\" \u003c\u003c p3.age \u003c\u003c endl; } int main() { test01(); system(\"pause\"); return 0; } 运行结果\nPerson 无参构造函数的调用 Person 有参构造函数的调用 Person 拷贝构造函数的调用 p2的年龄为：10 p3的年龄为：10 Person 析构函数的调用 Person 析构函数的调用 Person 析构函数的调用 2）构造函数的调用：显示法\nvoid test01() { //2、显示法 Person p1; Person p2 = Person(10); //有参构造 Person p3 = Person(p2); //拷贝构造 //Person(10); //匿名对象 特点：当前行执行结束后，系统会立即回收掉匿名对象 //注意事项2 //不要利用拷贝构造函数 初始化匿名对象 编译器会认为 Person(p3); 等价于 Person p3; 重定义，报错。 //Person(p3); cout \u003c\u003c \"p2的年龄为：\" \u003c\u003c p2.age \u003c\u003c endl; cout \u003c\u003c \"p3的年龄为：\" \u003c\u003c p3.age \u003c\u003c endl; } int main() { test01(); system(\"pause\"); return 0; } 运行结果\nPerson 无参构造函数的调用 Person 有参构造函数的调用 Person 拷贝构造函数的调用 p2的年龄为：10 p3的年龄为：10 Person 析构函数的调用 Person 析构函数的调用 Person 析构函数的调用 3）构造函数的调用：\nvoid test01() { //3、隐式转换法 Person p4 = 10; //相当于 写了 Person(10); Person p5 = p4; //拷贝构造 cout \u003c\u003c \"p4的年龄：\" \u003c\u003c p4.age \u003c\u003c endl; cout \u003c\u003c \"p5的年龄：\" \u003c\u003c p5.age \u003c\u003c endl; } int main() { test01(); system(\"pause\"); return 0; } 运行结果\nPerson 有参构造函数的调用 Person 拷贝构造函数的调用 p4的年龄：10 p5的年龄：10 Person 析构函数的调用 Person 析构函数的调用 4.2.3 拷贝构造函数调用时机 C++中拷贝构造函数调用时机通常有三种情况。\n使用一个已经创建完毕的对象来初始化一个新对象。\n值传递的方式给函数参数传值。\n以值方式返回局部对象。\n示例代码\n#include using namespace std; //拷贝构造函数调用时机 //1、使用一个已经创建完毕的对象来初始化一个新对象 //2、值传递的方式给函数参数传值 //3、值方式返回局部对象 class Person { public: int m_Age; Person() { cout \u003c\u003c \"Person默认构造函数的调用\" \u003c\u003c endl; } Person(int age) { m_Age = age; cout \u003c\u003c \"Person有参构造函数的调用\" \u003c\u003c endl; } Person(const Person\u0026 p) { m_Age = p.m_Age; cout \u003c\u003c \"Person拷贝构造函数的调用\" \u003c\u003c endl; } ~Person() { cout \u003c\u003c \"Person默认析构函数的调用\" \u003c\u003c endl; } }; 1、使用一个已经创建完毕的对象来初始化一个新对象。\n//1、使用一个已经创建完毕的对象来初始化一个新对象 void test01() { Person p1(20); Person p2(p1); cout \u003c\u003c \"p2的年龄为：\" \u003c\u003c p2.m_Age \u003c\u003c endl; } int main() { test01(); system(\"pause\"); return 0; } 运行结果\nPerson有参构造函数的调用 Person拷贝构造函数的调用 p2的年龄为：20 Person默认析构函数的调用 Person默认析构函数的调用 2、值传递的方式给函数参数传值\n//2、值传递的方式给函数参数传值 //相当于Person p1 = p; void doWork(Person p1) { } void test02() { Person p; doWork(p); } 运行结果\nPerson默认构造函数的调用 Person拷贝构造函数的调用 Person默认析构函数的调用 Person默认析构函数的调用 3、值方式返回局部对象\n//3、值方式返回局部对象 Person doWork03() { Person p1; cout \u003c\u003c \"p1的地址为：\" \u003c\u003c (int*)\u0026p1 \u003c\u003c endl; return p1; } void test03() { Person p = doWork03(); cout \u003c\u003c \"p的地址为：\" \u003c\u003c (int*)\u0026p \u003c\u003c endl; } 运行结果\nPerson默认构造函数的调用 010FF894 Person拷贝构造函数的调用 Person默认析构函数的调用 010FF98C Person默认析构函数的调用 运行结果（VS2022）编译器会优化\nPerson默认构造函数的调用 p1的地址为：000000B083EFF5D4 p的地址为：000000B083EFF5D4 Person默认析构函数的调用 4.2.4 构造函数调用规则 默认情况下，c++编译器至少给一个类添加3个函数。\n1．默认构造函数(无参，函数体为空)。\n2．默认析构函数(无参，函数体为空)。\n3．默认拷贝构造函数，对属性进行值拷贝。\n构造函数调用规则如下：\n如果用户定义有参构造函数，c++不在提供默认无参构造，但是会提供默认拷贝构造。\n如果用户定义拷贝构造函数，c++不会再提供其他构造函数。\n示例代码\n#include using namespace std; //构造函数的调用规则 //1、创建一个类，C++编译器会给每个类都添加至少三个函数 //默认构造(空实现) //析构函数(空实现) //拷贝构造(值拷贝) //2、 // 如果我们写了有参构造函数，编译器就不再提供默认构造，依然提供拷贝构造 // 如果我们写了拷贝构造函数，编译器就不再提供其他普通构造函数了 class Person { public: int m_Age; Person() { cout \u003c\u003c \"Person默认构造函数的调用\" \u003c\u003c endl; } Person(int age) { m_Age = age; cout \u003c\u003c \"Person有参构造函数的调用\" \u003c\u003c endl; } /*Person(const Person\u0026 p) { m_Age = p.m_Age; cout \u003c\u003c \"Person拷贝构造函数的调用\" \u003c\u003c endl; }*/ ~Person() { cout \u003c\u003c \"Person默认析构函数的调用\" \u003c\u003c endl; } }; void test01() { Person p; p.m_Age = 18; Person p2(p); cout \u003c\u003c \"p2的年龄为：\" \u003c\u003c p2.m_Age \u003c\u003c endl; } int main() { test01(); system(\"pause\"); return 0; } 运行结果\nPerson默认构造函数的调用 p2的年龄为：18 Person默认析构函数的调用 Person默认析构函数的调用 可以看到我们定义了有参构造函数，而我们没有定义拷贝构造函数，但是编译器为我们提供了拷贝构造函数，将p.m_Age = 18值拷贝给了p2。\n4.2.5 深拷贝与浅拷贝 深浅拷贝是面试经典问题，也是常见的一个坑。\n浅拷贝：简单的赋值拷贝操作。\n深拷贝：在堆区重新申请空间，进行拷贝操作。\n示例代码\n#include using namespace std; //深拷贝与浅拷贝 class Person { public: int m_Age; int *m_Height; //身高 public: Person() { cout \u003c\u003c \"Person的默认构造函数调用\" \u003c\u003c endl; } Person(int age, int height) { cout \u003c\u003c \"Person的有参构造函数调用\" \u003c\u003c endl; m_Age = age; m_Height = new int(height); } //自己实现拷贝构造函数，解决浅拷贝带来的问题 Person(const Person\u0026 p) { cout \u003c\u003c \"Person 拷贝构造函数调用\" \u003c\u003c endl; m_Age = p.m_Age; //m_Height = p.m_Height; 编译器默认实现就是这行代码 //深拷贝操作 m_Height = new int(*p.m_Height); } ~Person() { //析构代码，将堆区开辟数据做释放操作 if (m_Height != NULL) { delete m_Height; m_Height = NULL; } cout \u003c\u003c \"Person的默认析构函数调用\" \u003c\u003c endl; } }; void test01() { Person p1(18,160); Person p2(p1); cout \u003c\u003c \"p1的年龄为：\" \u003c\u003c p1.m_Age \u003c\u003c \" 身高为：\" \u003c\u003c *p1.m_Height \u003c\u003c endl; cout \u003c\u003c \"p2的年龄为：\" \u003c\u003c p2.m_Age \u003c\u003c \" 身高为：\" \u003c\u003c *p2.m_Height \u003c\u003c endl; } int main() { test01(); system(\"pause\"); return 0; } 运行结果\nPerson的有参构造函数调用 Person 拷贝构造函数调用 p1的年龄为：18 身高为：160 p2的年龄为：18 身高为：160 Person的默认析构函数调用 Person的默认析构函数调用 假如，我们没有自行设计拷贝构造函数，那么编译器会默认为浅拷贝，也就是说首先p2析构，内存释放，然后p1析构，内存释放，然而此时对应内存已经释放过了，无法释放第二次，所以会报错。\n浅拷贝的意思就是 p1.m_Height在堆区开辟内存，对应的地址为0x0011，而拷贝给p2.m_Height，它对应的地址也是0x0011。\n而深拷贝也就是说， p1.m_Height在堆区开辟内存，对应的地址为0x0011，而拷贝给p2.m_Height，p2.m_Height开辟了一个新地址，0x0022，但是0x0011和0x0022的内容都是160。\n总结：如果属性有在堆区开辟的，一定要自己提供拷贝构造函数，防止浅拷贝带来的问题。\n4.2.6 初始化列表 作用：\nC++提供了初始化列表语法，用来初始化属性。\n语法：构造函数()：属性1(值1),属性2（值2）... {}\n示例代码\n1、传统初始化操作。\n#include using namespace std; //初始化列表 class Person { public: //传统初始化操作 Person(int a, int b, int c) { m_A = a; m_B = b; m_C = c; } void PrintPerson() { cout \u003c\u003c \"m_A：\" \u003c\u003c m_A \u003c\u003c endl; cout \u003c\u003c \"m_B：\" \u003c\u003c m_B \u003c\u003c endl; cout \u003c\u003c \"m_C：\" \u003c\u003c m_C \u003c\u003c endl; } private: int m_A; int m_B; int m_C; }; void test01() { Person p(1,2,3); p.PrintPerson(); } int main() { test01(); system(\"pause\"); return 0; } 运行结果\nm_A：1 m_B：2 m_C：3 2、初始化列表初始化属性。\n#include using namespace std; //初始化列表 class Person { public: //初始化列表初始化属性 Person(int a, int b, int c) :m_A(a), m_B(b), m_C(b){} void PrintPerson() { cout \u003c\u003c \"m_A：\" \u003c\u003c m_A \u003c\u003c endl; cout \u003c\u003c \"m_B：\" \u003c\u003c m_B \u003c\u003c endl; cout \u003c\u003c \"m_C：\" \u003c\u003c m_C \u003c\u003c endl; } private: int m_A; int m_B; int m_C; }; void test01() { Person p(10,20,30); p.PrintPerson(); } int main() { test01(); system(\"pause\"); return 0; } 运行结果\nm_A：10 m_B：20 m_C：20 4.2.7 类对象作为类成员 C++类中的成员可以是另一个类的对象，我们称该成员为 对象成员。\n例如：\nclass A {} class B { A a； } B类中有对象A作为成员，A为对象成员。\n那么当创建B对象时，A与B的构造和析构的顺序是谁先谁后？\n实验代码\n#include #include using namespace std; //类对象作为类成员 //手机类 class Phone { public: Phone(string PName) { cout \u003c\u003c \"Phone的构造函数调用\" \u003c\u003c endl; m_PName = PName; } ~Phone() { cout \u003c\u003c \"Phone的析构函数调用\" \u003c\u003c endl; } string m_PName; }; class Person { public: //Phone m_Phone = pName 隐式转换法 Person(string name, string pName):m_Name(name),m_Phone(pName) { cout \u003c\u003c \"Person的构造函数调用\" \u003c\u003c endl; } ~Person() { cout \u003c\u003c \"Person的析构函数调用\" \u003c\u003c endl; } //姓名 string m_Name; //手机 Phone m_Phone; }; //其他类对象作为本类成员，构造时候先构造类对象，再构造自身，析构的顺序与构造相反 void test01() { Person p(\"张三\", \"苹果MAX\"); cout \u003c\u003c p.m_Name \u003c\u003c \"拿着：\" \u003c\u003c p.m_Phone.m_PName \u003c\u003c endl; } int main() { test01(); system(\"pause\"); return 0; } 运行结果\nPhone的构造函数调用 Person的构造函数调用 张三拿着：苹果MAX Person的析构函数调用 Phone的析构函数调用 结论：其他类对象作为本类成员，构造时候先构造类对象，再构造自身，析构的顺序与构造相反。\n4.2.8 静态成员 静态成员就是在成员变量和成员函数前加上关键字static，称为静态成员。\n静态成员分为：\n静态成员变量\n所有对象共享同一份数据\n在编译阶段分配内存\n类内声明，类外初始化\n静态成员函数\n所有对象共享同一个函数\n静态成员函数只能访问静态成员变量\n实验代码-静态成员变量\n实验一 静态成员变量的特点\n#include using namespace std; //静态成员变量 class Person { public: //1 所有对象都共享同一份数据 //2 编译阶段就分配内存 //3 类内声明 类外初始化操作 static int m_A; }; int Person::m_A = 100; void test01() { Person p; cout \u003c\u003c p.m_A \u003c\u003c endl; //输出100 Person p2; p2.m_A = 200; cout \u003c\u003c p2.m_A \u003c\u003c endl; //输出200 cout \u003c\u003c p.m_A \u003c\u003c endl; //输出200 } int main() { test01();\treturn 0; } 运行结果\n100 200 200 结论\n静态成员变量需要类内声明 类外初始化操作。\n所有对象都共享同一份数据，从输出结果为100，200，200即可看出。\n编译阶段就分配内存。\n实验二 静态成员变量的访问方式\n#include using namespace std; //静态成员变量 class Person { public: static int m_A; }; int Person::m_A = 100; void test02() { //静态成员变量 不属于某个对象上 所有对象都共享同一份数据 //因此 静态变量有2种访问方式 //1、通过对象进行访问 Person p; cout \u003c\u003c p.m_A \u003c\u003c endl; //2、通过类名进行访问 cout \u003c\u003c Person::m_A \u003c\u003c endl; } int main() { test02();\treturn 0; } 运行结果\n100 100 结论\n静态成员变量 不属于某个对象上 所有对象都共享同一份数据。因此 静态变量有2种访问方式\n通过对象进行访问。\n通过类名进行访问。\n实验三 静态成员变量的访问权限\n#include using namespace std; //静态成员变量 class Person { public: static int m_A; private: static int m_B; }; int Person::m_A = 100; int Person::m_B = 200; void test02() { cout \u003c\u003c Person::m_A \u003c\u003c endl; //cout \u003c\u003c Person::m_B \u003c\u003c endl; 类外访问不到私有静态成员变量 } int main() { test02();\treturn 0; } 运行结果\n100 结论\n静态成员变量也是有访问权限的。类外访问不到私有静态成员变量\n静态成员变量-总结\n静态成员变量的特点\n所有对象都共享同一份数据。\n编译阶段就分配内存。\n类内声明 类外初始化操作。\n静态成员变量的访问方式\n通过对象进行访问。\n通过类名进行访问。\n静态成员变量的访问权限\n类外访问不到私有静态成员变量。 实验代码-静态成员函数\n实验二 静态成员函数可以访问哪些静态成员变量\n#include using namespace std; //静态成员函数 //所有对象共享同一个函数 //静态成员函数只能访问静态成员变量 class Person { public: //静态成员函数 static void func() { cout \u003c\u003c \"static void func()的调用\" \u003c\u003c endl; m_A = 200; //静态成员函数 可以访问 静态成员变量 //m_B = 200; 静态成员函数 不可以访问 非静态成员变量，无法区分到底是哪个对象的m_B属性 } static int m_A; //静态成员变量 int m_B = 100; }; int Person::m_A = 100; int main() { return 0; } 结论\n静态成员函数 可以访问 静态成员变量。\n静态成员函数 不可以访问 非静态成员变量。\n为什么静态成员函数不可以访问非静态成员变量？\n解释：非静态成员必须与特定的对象相对，举个例子，先Person p1，然后调用p1.func()，再Perosn p2，然后调用p2.func()，此时编译器是无法判断你的m_B是和哪个对象对应的，所以说静态成员函数 不可以访问 非静态成员变量。\n同样也可以解释为什么静态成员函数 可以访问 静态成员变量，因为m_A是所有对象共享的。\nEND END：本节内容到此结束。\n个人提升之余，别忘了和小伙伴积极交流，很多人觉得他们在思考，而实际上他们只是在重新整理自己的偏见。请珍惜和他人交流讨论的机会。\n希望你每一天都有所收获，进步up up up。今天的我们并不比昨天更聪明，但一定要比昨天更睿智。\n",
  "wordCount" : "9695",
  "inLanguage": "zh",
  "image":"https://testingcf.jsdelivr.net/gh/EddyCliff/ChartBed/BlogCover/CPP.png","datePublished": "2024-04-30T00:17:58+09:00",
  "dateModified": "2024-04-30T00:17:58+09:00",
  "author":[{
    "@type": "Person",
    "name": "Eddy"
  }],
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://eddyblog.cn/posts/tech/cpp-programming-p4/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Eddy's blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://eddyblog.cn/img/logo3.jpg"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    (function () {
        let  arr,reg = new RegExp("(^| )"+"change-themes"+"=([^;]*)(;|$)");
        if(arr = document.cookie.match(reg)) {
        } else {
            if (new Date().getHours() >= 19 || new Date().getHours() < 6) {
                document.body.classList.add('dark');
                localStorage.setItem("pref-theme", 'dark');
            } else {
                document.body.classList.remove('dark');
                localStorage.setItem("pref-theme", 'light');
            }
        }
    })()

    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }
</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://eddyblog.cn/" accesskey="h" title="Eddy&#39;s Blog (Alt + H)">
            <img src="https://eddyblog.cn/img/logo3.jpg" alt="logo" aria-label="logo"
                 height="35">Eddy&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                         fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                         stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                         fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                         stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
                <ul class="lang-switch"><li>|</li>
                </ul>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://eddyblog.cn/search" title="🔍 搜索 (Alt &#43; /)" accesskey=/>
                <span>🔍 搜索</span>
                </a>
            </li>
            <li>
                <a href="https://eddyblog.cn/" title="🏠 主页">
                <span>🏠 主页</span>
                </a>
            </li>
            <li>
                <a href="https://eddyblog.cn/posts" title="📚 文章">
                <span>📚 文章</span>
                </a>
            </li>
            <li>
                <a href="https://eddyblog.cn/tags" title="🧩 标签">
                <span>🧩 标签</span>
                </a>
            </li>
            <li>
                <a href="https://eddyblog.cn/archives/" title="⏱️ 时间轴">
                <span>⏱️ 时间轴</span>
                </a>
            </li>
            <li>
                <a href="https://eddyblog.cn/about" title="🙋🏻‍♂️ 关于">
                <span>🙋🏻‍♂️ 关于</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main page">
<style>
    i[id*="post_meta_style"] {
        display: flex;
        align-items: center;
        margin: 0 0 10px 0;
    }
</style>

<article class="post-single">
    <div id="single-content">
        <header class="post-header">
            <div class="breadcrumbs"><a href="https://eddyblog.cn/">🏠 主页</a>&nbsp;»&nbsp;<a href="https://eddyblog.cn/posts/">📚文章</a>&nbsp;»&nbsp;<a href="https://eddyblog.cn/posts/tech/">👨🏻‍💻 技术</a></div>
            <h1 class="post-title">
                C&#43;&#43;编程入门：类和对象-封装
            </h1>
            <div class="post-meta">

<style>
    i[id*="post_meta_style"] {
        display: flex;
        align-items: center;
        margin: 0 0 10px 0;
    }

    .parent-post-meta {
        display: flex;
        flex-wrap: wrap;
        opacity: 0.8;
    }
</style>

<span class="parent-post-meta">
    <span id="post_meta_style_1">
        <span class="fa fa-calendar-check-o"></span>
        <span>2024-04-30
            &nbsp;&nbsp;
        </span>
    </span>
    
    
    
    
    
    
    
    <span id="post_meta_style_3">
        <span class="fa fa-file-word-o"></span>
        <span>9695字
            &nbsp;&nbsp;
        </span>
    </span>
    <span id="post_meta_style_4">
        <span class="fa fa-clock-o"></span>
        <span>20分钟
            &nbsp;&nbsp;
        </span>
    </span>
    <span id="post_meta_style_5">
        <span class="fa fa-user-o"></span>
        <span>Eddy
            &nbsp;&nbsp;
        </span>
    </span>
    <span id="post_meta_style_6">
        <span class="fa fa-tags" style="opacity: 0.8"></span>
        <span>
            <span class="post-tags-meta">
                <a href="https://eddyblog.cn/tags/c&#43;&#43;/" style="color: var(--secondary)!important;">C&#43;&#43;</a>
                &nbsp;<a href="https://eddyblog.cn/tags/c&#43;&#43;-%E5%B0%81%E8%A3%85/" style="color: var(--secondary)!important;">C&#43;&#43; 封装</a>
                &nbsp;<a href="https://eddyblog.cn/tags/c&#43;&#43;-%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/" style="color: var(--secondary)!important;">C&#43;&#43; 类和对象</a>
            </span>
        </span>
    </span>
</span>
<span style="opacity: 0.8;">
                    <span id="post_meta_style_7">
                        &nbsp;&nbsp;
                        <span class="fa fa-eye" ></span>
                        <span>
                            <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv"></span></span>
                            &nbsp;&nbsp;
                        </span>
                    </span>
                    <span id="post_meta_style_8">
                        <span class="fa fa-commenting-o"></span>
                        <span>
                            <script src="https://cdn.staticfile.org/twikoo//twikoo.all.min.js"></script>
                            <script>
                                let url = document.documentURI
                                
                                let dnsUrl = "https://eddyblog.cn/"
                                let urlSplit = url.split(dnsUrl)
                                let finalUrl = urlSplit[1]
                                if (finalUrl[0] !== '/') {
                                    finalUrl = '/'+finalUrl
                                }
                                twikoo.getCommentsCount({
                                    envId:  null , 
                                region:  null , 
                                urls: [ 
                                    
                                    finalUrl,
                                ],
                                    includeReply: false 
                                }).then(function (res) {
                                    let count = res[0].count
                                    const obj = document.getElementById("comment_count");
                                    obj.innerText = count
                                    
                                    
                                    
                                }).catch(function (err) {
                                    
                                    console.error(err);
                                });
                            </script>
                            <span id="comment_count"></span>
                        </span>
                    </span>
                </span>

</div>
        </header> 
<figure class="entry-cover1"><img style="zoom:;" loading="lazy" src="https://testingcf.jsdelivr.net/gh/EddyCliff/ChartBed/BlogCover/CPP.png" alt="">
    
</figure><aside id="toc-container" class="toc-container wide">
    <div class="toc">
        <details  open>
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">目录</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#init" aria-label="INIT">INIT</a></li>
                <li>
                    <a href="#4-%e7%b1%bb%e5%92%8c%e5%af%b9%e8%b1%a1" aria-label="4 类和对象">4 类和对象</a><ul>
                        
                <li>
                    <a href="#41-%e5%b0%81%e8%a3%85" aria-label="4.1 封装">4.1 封装</a><ul>
                        
                <li>
                    <a href="#411-%e5%b0%81%e8%a3%85%e7%9a%84%e6%84%8f%e4%b9%89" aria-label="4.1.1 封装的意义">4.1.1 封装的意义</a></li>
                <li>
                    <a href="#412-struct%e5%92%8cclass%e5%8c%ba%e5%88%ab" aria-label="4.1.2 struct和class区别">4.1.2 struct和class区别</a></li>
                <li>
                    <a href="#413-%e6%88%90%e5%91%98%e5%b1%9e%e6%80%a7%e8%ae%be%e7%bd%ae%e4%b8%ba%e7%a7%81%e6%9c%89" aria-label="4.1.3 成员属性设置为私有">4.1.3 成员属性设置为私有</a></li></ul>
                </li>
                <li>
                    <a href="#42-%e5%af%b9%e8%b1%a1%e7%9a%84%e5%88%9d%e5%a7%8b%e5%8c%96%e5%92%8c%e6%b8%85%e7%90%86" aria-label="4.2 对象的初始化和清理">4.2 对象的初始化和清理</a><ul>
                        
                <li>
                    <a href="#421-%e6%9e%84%e9%80%a0%e5%87%bd%e6%95%b0%e5%92%8c%e6%9e%90%e6%9e%84%e5%87%bd%e6%95%b0" aria-label="4.2.1 构造函数和析构函数">4.2.1 构造函数和析构函数</a></li>
                <li>
                    <a href="#422-%e6%9e%84%e9%80%a0%e5%87%bd%e6%95%b0%e7%9a%84%e5%88%86%e7%b1%bb%e5%8f%8a%e8%b0%83%e7%94%a8" aria-label="4.2.2 构造函数的分类及调用">4.2.2 构造函数的分类及调用</a></li>
                <li>
                    <a href="#423-%e6%8b%b7%e8%b4%9d%e6%9e%84%e9%80%a0%e5%87%bd%e6%95%b0%e8%b0%83%e7%94%a8%e6%97%b6%e6%9c%ba" aria-label="4.2.3 拷贝构造函数调用时机">4.2.3 拷贝构造函数调用时机</a></li>
                <li>
                    <a href="#424-%e6%9e%84%e9%80%a0%e5%87%bd%e6%95%b0%e8%b0%83%e7%94%a8%e8%a7%84%e5%88%99" aria-label="4.2.4 构造函数调用规则">4.2.4 构造函数调用规则</a></li>
                <li>
                    <a href="#425-%e6%b7%b1%e6%8b%b7%e8%b4%9d%e4%b8%8e%e6%b5%85%e6%8b%b7%e8%b4%9d" aria-label="4.2.5 深拷贝与浅拷贝">4.2.5 深拷贝与浅拷贝</a></li>
                <li>
                    <a href="#426-%e5%88%9d%e5%a7%8b%e5%8c%96%e5%88%97%e8%a1%a8" aria-label="4.2.6 初始化列表">4.2.6 初始化列表</a></li>
                <li>
                    <a href="#427-%e7%b1%bb%e5%af%b9%e8%b1%a1%e4%bd%9c%e4%b8%ba%e7%b1%bb%e6%88%90%e5%91%98" aria-label="4.2.7 类对象作为类成员">4.2.7 类对象作为类成员</a></li>
                <li>
                    <a href="#428-%e9%9d%99%e6%80%81%e6%88%90%e5%91%98" aria-label="4.2.8 静态成员">4.2.8 静态成员</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#end" aria-label="END">END</a>
                </li>
            </ul>
        </div>
        </details>
    </div>
</aside>
<script>
    let activeElement;
    let elements;
    window.addEventListener('DOMContentLoaded', function (event) {
        checkTocPosition();

        elements = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]');
        
        activeElement = elements[0];
        const id = encodeURI(activeElement.getAttribute('id')).toLowerCase();
        document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
    }, false);

    window.addEventListener('resize', function(event) {
        checkTocPosition();
    }, false);

    window.addEventListener('scroll', () => {
        
        if (elements) {
            activeElement = Array.from(elements).find((element) => {
                if ((getOffsetTop(element) - window.pageYOffset) > 0 &&
                    (getOffsetTop(element) - window.pageYOffset) < window.innerHeight/2) {
                    return element;
                }
            }) || activeElement

            elements.forEach(element => {
                const id = encodeURI(element.getAttribute('id')).toLowerCase();
                if (element === activeElement){
                    document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
                } else {
                    document.querySelector(`.inner ul li a[href="#${id}"]`).classList.remove('active');
                }
            })
        }
    }, false);

    const main = parseInt(getComputedStyle(document.body).getPropertyValue('--article-width'), 10);
    const toc = parseInt(getComputedStyle(document.body).getPropertyValue('--toc-width'), 10);
    const gap = parseInt(getComputedStyle(document.body).getPropertyValue('--gap'), 10);

    function checkTocPosition() {
        const width = document.body.scrollWidth;
        if (width - main - (toc * 2) - (gap * 4) > 0) {
            document.getElementById("toc-container").classList.add("wide");
        } else {
            document.getElementById("toc-container").classList.remove("wide");
        }
    }

    function getOffsetTop(element) {
        if (!element.getClientRects().length) {
            return 0;
        }
        let rect = element.getBoundingClientRect();
        let win = element.ownerDocument.defaultView;
        return rect.top + win.pageYOffset;
    }
</script>
        <div class="post-content"><div align = "center">
<img src = "https://testingcf.jsdelivr.net/gh/EddyCliff/ChartBed/Blog-Common-Images/%E7%9F%A5%E8%AF%86%E8%92%99%E8%94%BD%E4%BA%86%E6%88%91%E7%9A%84%E5%8F%8C%E7%9C%BC.jpg" alt = "闪亮登场.jpg" width = "70%" height = "auto">
</div>
<br>
<h2 id="init">INIT<a hidden class="anchor" aria-hidden="true" href="#init">#</a></h2>
<div align = "center">
<img src = "https://testingcf.jsdelivr.net/gh/EddyCliff/ChartBed/Blog-Common-Images/INIT.jpg" alt = "INIT.jpg" width = "70%" height = "auto">
</div>
<br>
<blockquote>
<p><strong>INIT：本节内容正式开始。action!</strong></p>
</blockquote>
<h2 id="4-类和对象">4 类和对象<a hidden class="anchor" aria-hidden="true" href="#4-类和对象">#</a></h2>
<p>C++面向对象的三大特性为：<strong>封装、继承、多态。</strong></p>
<p>C++认为<strong>万事万物都皆为对象</strong>，对象上有其属性和行为。</p>
<p><strong>例如：</strong></p>
<p>人可以作为对象，属性有姓名、年龄、身高、体重&hellip;，行为有走、跑、跳、吃饭、唱歌&hellip;。</p>
<p>车也可以作为对象，属性有轮胎、方向盘、车灯&hellip;,行为有载人、放音乐、放空调&hellip;。</p>
<p>具有相同性质的<strong>对象</strong>，我们可以抽象称为<strong>类</strong>，人属于人类，车属于车类。</p>
<h3 id="41-封装">4.1 封装<a hidden class="anchor" aria-hidden="true" href="#41-封装">#</a></h3>
<h4 id="411-封装的意义">4.1.1 封装的意义<a hidden class="anchor" aria-hidden="true" href="#411-封装的意义">#</a></h4>
<p>封装是C++面向对象三大特性之一。</p>
<p>封装的意义：</p>
<ul>
<li>
<p>将属性和行为作为一个整体，表现生活中的事物。</p>
</li>
<li>
<p>将属性和行为加以权限控制。</p>
</li>
</ul>
<p><strong>封装意义一：</strong></p>
<p>在设计类的时候，属性和行为写在一起，表现事物。</p>
<p><strong>语法：</strong> <code>class 类名{ 访问权限： 属性 / 行为 };</code></p>
<p>**示例1：**设计一个圆类，求圆的周长。</p>
<blockquote>
<p>示例代码</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#75715e">#include&lt;iostream&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#66d9ef">double</span> PI <span style="color:#f92672">=</span> <span style="color:#ae81ff">3.14</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">//设计一个圆类，求圆的周长
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//圆求周长的公式:2 * PI * 半径
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">//class代表设计一个类，类后面紧跟着的是类名称
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Circle</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//访问权限
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#75715e">//公共权限
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//属性
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#75715e">//半径
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">int</span> m_r;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//行为
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#75715e">//获取圆的周长
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">double</span> <span style="color:#a6e22e">calculatrZC</span>()
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">return</span> <span style="color:#ae81ff">2</span> <span style="color:#f92672">*</span> PI <span style="color:#f92672">*</span> m_r;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//通过圆类 创建具体的圆(对象)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#75715e">//实例化(通过一个类 创建一个对象的过程)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	Circle c1;
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//给圆对象 的属性进行赋值
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	c1.m_r <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>;
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//2 * PI * 10 = 62.8
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;圆的周长为：&#34;</span> <span style="color:#f92672">&lt;&lt;</span> c1.calculatrZC() <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>	system(<span style="color:#e6db74">&#34;pause&#34;</span>);
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><blockquote>
<p>运行结果</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">圆的周长为：</span><span style="color:#ae81ff">62.8</span>
</span></span></code></pre></div><p>**示例2：**设计一个学生类，属性有姓名和学号，可以给姓名和学号赋值，可以显示学生的姓名和学号。</p>
<blockquote>
<p>示例代码</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#75715e">#include&lt;iostream&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include&lt;string&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">//类中的属性和行为 我们统一称为 成员
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// 属性 成员属性 成员变量
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// 行为 成员函数 成员方法
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Student</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//权限
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//属性
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	string m_name; <span style="color:#75715e">//姓名
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">int</span> m_Id; <span style="color:#75715e">//学号
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//行为
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#75715e">//显示姓名和学号
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">showStudent</span>()
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;姓名：&#34;</span> <span style="color:#f92672">&lt;&lt;</span> m_name <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34; 学号：&#34;</span> <span style="color:#f92672">&lt;&lt;</span> m_Id <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//给学生信息赋值
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setStudent</span>(string name,<span style="color:#66d9ef">int</span> id)
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		m_name <span style="color:#f92672">=</span> name;
</span></span><span style="display:flex;"><span>		m_Id <span style="color:#f92672">=</span> id;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//创建一个具体学生  实例化对象
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	Student s1;
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//给s1对象 进行属性赋值操作
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	s1.m_name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;张三&#34;</span>;
</span></span><span style="display:flex;"><span>	s1.m_Id <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>;
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//显示学生信息
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	s1.showStudent();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	Student s2;
</span></span><span style="display:flex;"><span>	s2.setStudent(<span style="color:#e6db74">&#34;李四&#34;</span>, <span style="color:#ae81ff">20</span>);
</span></span><span style="display:flex;"><span>	s2.showStudent();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	system(<span style="color:#e6db74">&#34;pause&#34;</span>);
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><blockquote>
<p>运行结果</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">姓名：张三</span>  <span style="color:#960050;background-color:#1e0010">学号：</span><span style="color:#ae81ff">10</span>
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">姓名：李四</span>  <span style="color:#960050;background-color:#1e0010">学号：</span><span style="color:#ae81ff">20</span>
</span></span></code></pre></div><p><strong>封装意义二：</strong></p>
<p>类在设计时，可以把属性和行为放在不同的权限下，加以控制。</p>
<p>访问权限有三种：</p>
<ol>
<li>
<p>public 公共权限</p>
</li>
<li>
<p>protected 保护权限</p>
</li>
<li>
<p>private 私有权限</p>
</li>
</ol>
<blockquote>
<p>示例代码</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#75715e">#include&lt;iostream&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include&lt;string&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">//访问权限
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//三种
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//公共权限 public    成员 类内可以访问 类外可以访问 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//保护权限 protected 成员 类内可以访问 类外不可以访问 儿子可以访问父亲中的访问内容
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//私有权限 private   成员 类内可以访问 类外不可以访问 儿子不可以访问父亲的私有内容
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Person</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//公共权限
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	string m_Name; <span style="color:#75715e">//姓名
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">protected</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//保护权限
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	string m_Car; <span style="color:#75715e">//汽车
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">private</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//私有权限
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">int</span> m_Password; <span style="color:#75715e">//银行卡密码
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">void</span> func()
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		m_Name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;张三&#34;</span>;
</span></span><span style="display:flex;"><span>		m_Car <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;拖拉机&#34;</span>;
</span></span><span style="display:flex;"><span>		m_Password <span style="color:#f92672">=</span> <span style="color:#ae81ff">123456</span>;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	Person p1;
</span></span><span style="display:flex;"><span>	p1.m_Name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;李四&#34;</span>;
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//p1.m_Car = &#34;奔驰&#34;; //保护去权限内容，在类外访问不到
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#75715e">//p1.m_Password = 123; //私有权限内容，类外访问不到
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	system(<span style="color:#e6db74">&#34;pause&#34;</span>);
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h4 id="412-struct和class区别">4.1.2 struct和class区别<a hidden class="anchor" aria-hidden="true" href="#412-struct和class区别">#</a></h4>
<p>在C++中 struct和class唯一的<strong>区别</strong>就在于 <strong>默认的访问权限不同。</strong></p>
<p>区别：</p>
<ul>
<li>
<p>struct 默认权限为公共</p>
</li>
<li>
<p>class 默认权限为私有</p>
</li>
</ul>
<blockquote>
<p>示例代码</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#75715e">#include&lt;iostream&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">//strcut 和class的区别
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//struct 默认权限是 public 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//public 默认权限是 private 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">C1</span> 
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">int</span> m_A; <span style="color:#75715e">//默认权限 是私有
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">C2</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">int</span> m_A; <span style="color:#75715e">//默认权限 是公有
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	C1 c1;
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// c1.m_A = 100;  //在class里默认权限为私有 ，因此类外不可以访问
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>	C2 c2;
</span></span><span style="display:flex;"><span>	c2.m_A <span style="color:#f92672">=</span> <span style="color:#ae81ff">100</span>; <span style="color:#75715e">//在struct默认的权限为公共，因此可以访问
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>	system(<span style="color:#e6db74">&#34;pause&#34;</span>);
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h4 id="413-成员属性设置为私有">4.1.3 成员属性设置为私有<a hidden class="anchor" aria-hidden="true" href="#413-成员属性设置为私有">#</a></h4>
<p>**优点1：**将所有成员属性设置为私有，可以自己控制读写权限</p>
<p>**优点2：**对于写权限，我们可以检测数据的有效性</p>
<blockquote>
<p>示例代码</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#75715e">#include&lt;iostream&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include&lt;string&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;
</span></span><span style="display:flex;"><span><span style="color:#75715e">//成员属性设置私有
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//1、可以自己控制读写权限
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//2、对于写可以检测数据有效性
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">//人类
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Person</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//设置姓名
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">void</span> setName(string name)
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		m_Name <span style="color:#f92672">=</span> name;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//获取姓名
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	string <span style="color:#a6e22e">getName</span>()
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">return</span> m_Name;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//获取年龄
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">getAge</span>()
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">return</span> m_Age;	
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//设置年龄 0~150之间
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setAge</span>(<span style="color:#66d9ef">int</span> age)
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">if</span> (age <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">||</span> age <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">150</span>)
</span></span><span style="display:flex;"><span>		{
</span></span><span style="display:flex;"><span>			cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;年龄&#34;</span> <span style="color:#f92672">&lt;&lt;</span> age <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;输入有误，赋值失败&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">return</span>;
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>		m_Age <span style="color:#f92672">=</span> age;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//设置偶像
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setIdol</span>(string idol)
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		m_Idol <span style="color:#f92672">=</span> idol;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>	string m_Name; <span style="color:#75715e">//姓名 可读可写
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">int</span> m_Age <span style="color:#f92672">=</span> <span style="color:#ae81ff">20</span>; <span style="color:#75715e">//年龄 只读 也可以写 要求年龄在0~150之间
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	string m_Idol; <span style="color:#75715e">//偶像 只写
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	Person p;
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//姓名设置
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	p.setName(<span style="color:#e6db74">&#34;张三&#34;</span>);
</span></span><span style="display:flex;"><span>	cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;姓名：&#34;</span> <span style="color:#f92672">&lt;&lt;</span> p.getName() <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//年龄设置
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	p.setAge(<span style="color:#ae81ff">160</span>);
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//年龄获取
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;年龄：&#34;</span> <span style="color:#f92672">&lt;&lt;</span> p.getAge() <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//偶像设置
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	p.setIdol(<span style="color:#e6db74">&#34;张曼玉&#34;</span>);
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//偶像只可写入 不可读取
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>	system(<span style="color:#e6db74">&#34;pause&#34;</span>);
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><blockquote>
<p>运行结果</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">姓名：张三</span>
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">年龄</span><span style="color:#ae81ff">160</span><span style="color:#960050;background-color:#1e0010">输入有误，赋值失败</span>
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">年龄：</span><span style="color:#ae81ff">20</span>
</span></span></code></pre></div><p><strong>练习案例1：设计立方体类</strong></p>
<p>设计立方体类(Cube)</p>
<p>求出立方体的面积和体积</p>
<p>分别用全局函数和成员函数判断两个立方体是否相等。</p>
<p><img loading="lazy" src="4-%e7%b1%bb%e5%92%8c%e5%af%b9%e8%b1%a1.png" alt="4-类和对象.png"  />
</p>
<p><strong>思路：</strong></p>
<p>1）创建立方体类</p>
<p>2）设计属性 长，高，宽</p>
<p>3）设计行为 获取立方体面积和体积</p>
<p>4）分别利用全局函数和成员函数 判断两个立方体是否相等</p>
<blockquote>
<p>示例代码</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#75715e">#include&lt;iostream&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;
</span></span><span style="display:flex;"><span><span style="color:#75715e">//立方体类设计
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//1、创建立方体类
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//2、设计属性
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//3、设计行为 获取立方体面积和体积
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//4、分别利用全局函数和成员函数 判断两个立方体是否相等
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Cube</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//设置长
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">void</span> setL(<span style="color:#66d9ef">int</span> l)
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		m_L <span style="color:#f92672">=</span> l;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//获取长
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">getL</span>()
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">return</span> m_L;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//设置宽
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setW</span>(<span style="color:#66d9ef">int</span> w)
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		m_W <span style="color:#f92672">=</span> w;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//获取宽
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">getW</span>()
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">return</span> m_W;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//设置高
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setH</span>(<span style="color:#66d9ef">int</span> h)
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		m_H <span style="color:#f92672">=</span> h;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//获取高
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">getH</span>()
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">return</span> m_H;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//获取立方体面积
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">caculateS</span>()
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">return</span> (<span style="color:#ae81ff">2</span> <span style="color:#f92672">*</span> m_L <span style="color:#f92672">*</span> m_W) <span style="color:#f92672">+</span> (<span style="color:#ae81ff">2</span> <span style="color:#f92672">*</span> m_H <span style="color:#f92672">*</span> m_W) <span style="color:#f92672">+</span> (<span style="color:#ae81ff">2</span> <span style="color:#f92672">*</span> m_L <span style="color:#f92672">*</span> m_H);
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//获取立方体体积
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">caculateV</span>()
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">return</span> m_L <span style="color:#f92672">*</span> m_W <span style="color:#f92672">*</span> m_H;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//利用成员函数判断两个立方体是否相等
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">bool</span> <span style="color:#a6e22e">isSameByClass</span>(Cube <span style="color:#f92672">&amp;</span>c)
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">if</span> (m_L <span style="color:#f92672">==</span> c.getL() <span style="color:#f92672">&amp;&amp;</span> m_W <span style="color:#f92672">==</span> c.getW() <span style="color:#f92672">&amp;&amp;</span> m_L <span style="color:#f92672">==</span> c.getL())
</span></span><span style="display:flex;"><span>		{
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">return</span> true;
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">else</span>
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">return</span> false;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">int</span> m_L; <span style="color:#75715e">//长
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">int</span> m_W; <span style="color:#75715e">//宽
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">int</span> m_H; <span style="color:#75715e">//高
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">//利用全局函数判断 两个立方体是否相等
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">bool</span> <span style="color:#a6e22e">isSame</span>(Cube <span style="color:#f92672">&amp;</span>c1,Cube <span style="color:#f92672">&amp;</span>c2)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> (c1.getL() <span style="color:#f92672">==</span> c2.getL() <span style="color:#f92672">&amp;&amp;</span> c1.getW() <span style="color:#f92672">==</span> c1.getW() <span style="color:#f92672">&amp;&amp;</span> c1.getH() <span style="color:#f92672">==</span> c2.getH())
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">return</span> true;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">else</span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">return</span> false;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//创建立方体对象
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	Cube c1;
</span></span><span style="display:flex;"><span>	c1.setL(<span style="color:#ae81ff">10</span>);
</span></span><span style="display:flex;"><span>	c1.setW(<span style="color:#ae81ff">10</span>);
</span></span><span style="display:flex;"><span>	c1.setH(<span style="color:#ae81ff">10</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;c1的面积为：&#34;</span> <span style="color:#f92672">&lt;&lt;</span> c1.caculateS() <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>	cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;c1的体积为：&#34;</span> <span style="color:#f92672">&lt;&lt;</span> c1.caculateV() <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//创建第二个立方体
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	Cube c2;
</span></span><span style="display:flex;"><span>	c2.setL(<span style="color:#ae81ff">10</span>);
</span></span><span style="display:flex;"><span>	c2.setW(<span style="color:#ae81ff">10</span>);
</span></span><span style="display:flex;"><span>	c2.setH(<span style="color:#ae81ff">10</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;c2的面积为：&#34;</span> <span style="color:#f92672">&lt;&lt;</span> c2.caculateS() <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>	cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;c2的体积为：&#34;</span> <span style="color:#f92672">&lt;&lt;</span> c2.caculateV() <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">bool</span> ret <span style="color:#f92672">=</span> isSame(c1, c2);
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> (ret)
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;c1和c2是相等的&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">else</span>
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;c1和c2是不相等的&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//利用成员函数判断
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	ret <span style="color:#f92672">=</span> c1.isSameByClass(c2);
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> (ret)
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;成员函数判断：c1和c2是相等的&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">else</span>
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;成员函数判断：c1和c2是不相等的&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	system(<span style="color:#e6db74">&#34;pause&#34;</span>);
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><blockquote>
<p>运行结果</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>c1的面积为<span style="color:#960050;background-color:#1e0010">：</span><span style="color:#ae81ff">600</span>
</span></span><span style="display:flex;"><span>c1的体积为<span style="color:#960050;background-color:#1e0010">：</span><span style="color:#ae81ff">1000</span>
</span></span><span style="display:flex;"><span>c2的面积为<span style="color:#960050;background-color:#1e0010">：</span><span style="color:#ae81ff">600</span>
</span></span><span style="display:flex;"><span>c2的体积为<span style="color:#960050;background-color:#1e0010">：</span><span style="color:#ae81ff">1000</span>
</span></span><span style="display:flex;"><span>c1和c2是相等的
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">成员函数判断：</span>c1和c2是相等的
</span></span></code></pre></div><p><strong>练习案例2：点和圆的关系</strong></p>
<p>设计一个圆形类（Circle），和一个点类（Point），计算点和圆的关系。</p>
<p><img loading="lazy" src="4-%e7%b1%bb%e5%92%8c%e5%af%b9%e8%b1%a1-1.png" alt="4-类和对象-1.png"  />
</p>
<p><strong>思路：</strong></p>
<p>1）创建点类<code>point.h</code>和<code>point.cpp</code></p>
<p>2）创建圆类<code>circle.h</code>和<code>circle.cpp</code></p>
<p>3）点和圆的关系判断<code>void isIncircle(Circle &amp;c,Point &amp;p)</code></p>
<p>点到圆心的距离 == 圆心 （点在圆上）</p>
<p>点到圆心的距离 &lt; 圆心 （点在圆内）</p>
<p>点到圆心的距离 &gt; 圆心 （点在圆外）</p>
<blockquote>
<p>示例代码</p>
</blockquote>
<p>我们将点类用<code>point.cpp</code>和<code>point.h</code>实现。将圆类用<code>circle.cpp</code>和<code>circle.h</code>实现。</p>
<blockquote>
<p>点类头文件<code>point.h</code></p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#75715e">#pragma once
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include&lt;iostream&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Point</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//设置x坐标
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">void</span> setX(<span style="color:#66d9ef">int</span> x);
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//读取x坐标
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">getX</span>();
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//设置y坐标
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setY</span>(<span style="color:#66d9ef">int</span> y);
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//读取y坐标
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">getY</span>();
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">int</span> m_x;
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">int</span> m_y;
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><blockquote>
<p>点类代码实现<code>point.c</code></p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#75715e">#include&#34;point.h&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">//设置x坐标
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">void</span> Point<span style="color:#f92672">::</span>setX(<span style="color:#66d9ef">int</span> x)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	m_x <span style="color:#f92672">=</span> x;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#75715e">//读取x坐标
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">int</span> Point<span style="color:#f92672">::</span>getX()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> m_x;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#75715e">//设置y坐标
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">void</span> Point<span style="color:#f92672">::</span>setY(<span style="color:#66d9ef">int</span> y)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	m_y <span style="color:#f92672">=</span> y;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#75715e">//读取y坐标
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">int</span> Point<span style="color:#f92672">::</span>getY()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> m_y;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><blockquote>
<p>圆类头文件<code>circle.h</code></p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#75715e">#pragma once
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include&lt;iostream&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include&#34;point.h&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Circle</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//设置半径
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">void</span> setR(<span style="color:#66d9ef">int</span> r);
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//读取半径
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">getR</span>();
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//设置圆心
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setCenter</span>(Point center);
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//获取圆心
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	Point <span style="color:#a6e22e">getCenter</span>();
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">int</span> m_R; <span style="color:#75715e">//半径
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#75715e">//在类中可以让另一个类，作为本类中的成员
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	Point m_center; <span style="color:#75715e">//圆心
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><blockquote>
<p>圆类代码实现<code>circle.cpp</code></p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#75715e">#include&#34;circle.h&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">//设置半径
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">void</span> Circle<span style="color:#f92672">::</span>setR(<span style="color:#66d9ef">int</span> r)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	m_R <span style="color:#f92672">=</span> r;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#75715e">//读取半径
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">int</span> Circle<span style="color:#f92672">::</span>getR()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> m_R;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#75715e">//设置圆心
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">void</span> Circle<span style="color:#f92672">::</span>setCenter(Point center)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	m_center <span style="color:#f92672">=</span> center;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#75715e">//获取圆心
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>Point Circle<span style="color:#f92672">::</span>getCenter()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> m_center;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><blockquote>
<p>主文件<code>点和圆的关系.cpp</code></p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#75715e">#include&lt;iostream&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include&#34;circle.h&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include&#34;point.h&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;
</span></span><span style="display:flex;"><span><span style="color:#75715e">//点和圆的关系案例
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">//判断点和圆的关系
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">isIncircle</span>(Circle <span style="color:#f92672">&amp;</span>c,Point <span style="color:#f92672">&amp;</span>p)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//计算两点距离的平方
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">int</span> dist <span style="color:#f92672">=</span>
</span></span><span style="display:flex;"><span>	(c.getCenter().getX() <span style="color:#f92672">-</span> p.getX()) <span style="color:#f92672">*</span> (c.getCenter().getX() <span style="color:#f92672">-</span> p.getX()) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>	(c.getCenter().getY() <span style="color:#f92672">-</span> p.getY()) <span style="color:#f92672">*</span> (c.getCenter().getY() <span style="color:#f92672">-</span> p.getY());
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//计算半径的平方
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">int</span> rDistance <span style="color:#f92672">=</span> c.getR() <span style="color:#f92672">*</span> c.getR();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//判断两点距离的平方和半径的平方的关系
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">if</span> (dist <span style="color:#f92672">==</span> rDistance)
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;点在圆上&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (dist <span style="color:#f92672">&gt;</span> rDistance)
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;点在圆外&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">else</span>
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;点在圆内&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//创建圆
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	Circle c1;
</span></span><span style="display:flex;"><span>	c1.setR(<span style="color:#ae81ff">10</span>);
</span></span><span style="display:flex;"><span>	Point center;
</span></span><span style="display:flex;"><span>	center.setX(<span style="color:#ae81ff">10</span>);
</span></span><span style="display:flex;"><span>	center.setY(<span style="color:#ae81ff">0</span>);
</span></span><span style="display:flex;"><span>	c1.setCenter(center);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//创建点
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	Point p1;
</span></span><span style="display:flex;"><span>	p1.setX(<span style="color:#ae81ff">10</span>);
</span></span><span style="display:flex;"><span>	p1.setY(<span style="color:#ae81ff">9</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	Point p2;
</span></span><span style="display:flex;"><span>	p2.setX(<span style="color:#ae81ff">10</span>);
</span></span><span style="display:flex;"><span>	p2.setY(<span style="color:#ae81ff">10</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	Point p3;
</span></span><span style="display:flex;"><span>	p3.setX(<span style="color:#ae81ff">10</span>);
</span></span><span style="display:flex;"><span>	p3.setY(<span style="color:#ae81ff">11</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//判断关系
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	isIncircle(c1, p1);
</span></span><span style="display:flex;"><span>	isIncircle(c1, p2);
</span></span><span style="display:flex;"><span>	isIncircle(c1, p3);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	system(<span style="color:#e6db74">&#34;pause&#34;</span>);
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><blockquote>
<p>运行结果</p>
</blockquote>
<p>我们设置了一个圆，圆心为（10,0），半径为10。
我们设置了三个点（10,9）（10,10）（10,11）。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">点在圆内</span>
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">点在圆上</span>
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">点在圆外</span>
</span></span></code></pre></div><h3 id="42-对象的初始化和清理">4.2 对象的初始化和清理<a hidden class="anchor" aria-hidden="true" href="#42-对象的初始化和清理">#</a></h3>
<ul>
<li>
<p>生活中我们买的电子产品都基本会有出厂设置，在某一天我们不用时候也会删除一些自己信息数据保证安全。</p>
</li>
<li>
<p>C++中的面向对象来源于生活，每个对象也都会有初始设置以及 对象销毁前的清理数据的设置。</p>
</li>
</ul>
<h4 id="421-构造函数和析构函数">4.2.1 构造函数和析构函数<a hidden class="anchor" aria-hidden="true" href="#421-构造函数和析构函数">#</a></h4>
<p>对象的<strong>初始化和清理</strong>也是两个非常重要的安全问题。</p>
<p>一个对象或者变量没有初始状态，对其使用后果是未知。</p>
<p>同样的使用完一个对象或变量，没有及时清理，也会造成一定的安全问题。</p>
<p>c++利用了<strong>构造函数</strong>和<strong>析构函数</strong>解决上述问题，这两个函数将会被编译器自动调用，完成对象初始化和清理工作。</p>
<p>对象的初始化和清理工作是编译器强制要我们做的事情，因此如果<strong>我们不提供构造和析构，编译器会提供</strong></p>
<p><strong>编译器提供的构造函数和析构函数是空实现。</strong></p>
<ul>
<li>
<p>构造函数：主要作用在于创建对象时为对象的成员属性赋值，构造函数由编译器自动调用，无须手动调用。</p>
</li>
<li>
<p>析构函数：主要作用在于对象<strong>销毁前</strong>系统自动调用，执行一些清理工作。</p>
</li>
</ul>
<p><strong>构造函数语法：</strong><code>类名(){}</code></p>
<ol>
<li>
<p>构造函数，没有返回值也不写void</p>
</li>
<li>
<p>函数名称与类名相同</p>
</li>
<li>
<p>构造函数可以有参数，因此可以发生重载</p>
</li>
<li>
<p>程序在调用对象时候会自动调用构造，无须手动调用,而且只会调用一次</p>
</li>
</ol>
<p><strong>析构函数语法：</strong> <code>~类名(){}</code></p>
<ol>
<li>
<p>析构函数，没有返回值也不写void</p>
</li>
<li>
<p>函数名称与类名相同,在名称前加上符号 ~</p>
</li>
<li>
<p>析构函数不可以有参数，因此不可以发生重载</p>
</li>
<li>
<p>程序在对象销毁前会自动调用析构，无须手动调用,而且只会调用一次</p>
</li>
</ol>
<blockquote>
<p>示例代码</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#75715e">#include&lt;iostream&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;
</span></span><span style="display:flex;"><span><span style="color:#75715e">//对象的初始化和清理
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//1、构造函数 进行初始化操作
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//2、析构函数 进行清理的操作
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Person</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//1.1、构造函数
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#75715e">//没有返回值 不用void
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#75715e">//函数名 与类名称相同
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#75715e">//构造函数可以有参数，可以发生重载
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#75715e">//创建对象的时候，构造函数会自动调用，且只调用一次
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	Person()
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;Person 构造函数的调用&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//1.2、析构函数
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#75715e">//没有返回值 不写void
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#75715e">//函数名和类名相同 在名称前加~
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#75715e">//析构函数不可以有参数，不可以发生重载
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#75715e">//对象销毁前 会自动调用析构函数 而且只会调用一次
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#f92672">~</span>Person()
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;Person 析构函数的调用&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">test01</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	Person P;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	test01();
</span></span><span style="display:flex;"><span>	system(<span style="color:#e6db74">&#34;pause&#34;</span>);
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><blockquote>
<p>运行结果</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>Person <span style="color:#960050;background-color:#1e0010">构造函数的调用</span>
</span></span><span style="display:flex;"><span>Person <span style="color:#960050;background-color:#1e0010">析构函数的调用</span>
</span></span></code></pre></div><h4 id="422-构造函数的分类及调用">4.2.2 构造函数的分类及调用<a hidden class="anchor" aria-hidden="true" href="#422-构造函数的分类及调用">#</a></h4>
<p>两种分类方式：</p>
<p>1）按参数分为： 有参构造和无参构造</p>
<p>2）按类型分为： 普通构造和拷贝构造</p>
<p>三种调用方式：</p>
<p>1）括号法</p>
<p>2）显示法</p>
<p>3）隐式转换法</p>
<blockquote>
<p>构造函数的分类</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#75715e">#include&lt;iostream&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">//1构造函数的分类及调用
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//分类
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//按照参数分类 无参构造(默认构造) 和 有参构造
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//按照类型分类 普通构造 和 拷贝构造
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Person</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">int</span> age;
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//构造函数
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	Person()
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;Person 无参构造函数的调用&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//有参构造函数
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	Person(<span style="color:#66d9ef">int</span> a)
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		age <span style="color:#f92672">=</span> a;
</span></span><span style="display:flex;"><span>		cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;Person 有参构造函数的调用&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//拷贝构造函数
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	Person(<span style="color:#66d9ef">const</span> Person <span style="color:#f92672">&amp;</span>p)
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		<span style="color:#75715e">//将传入的人身上的所有属性，拷贝在我的身上 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		age <span style="color:#f92672">=</span> p.age;
</span></span><span style="display:flex;"><span>		cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;Person 拷贝构造函数的调用&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//析构函数
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#f92672">~</span>Person()
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;Person 析构函数的调用&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><blockquote>
<p>构造函数的调用</p>
</blockquote>
<p>1）构造函数的调用：括号法</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">test01</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//1、括号法
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	Person p1; <span style="color:#75715e">//默认构造函数的调用
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	Person p2(<span style="color:#ae81ff">10</span>); <span style="color:#75715e">//有参构造函数的调用
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	Person p3(p2); <span style="color:#75715e">//拷贝构造函数的调用
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//注意事项1
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#75715e">//调用默认构造函数时候，不用加()
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#75715e">//因为下面这行代码，编译器会认为是一个函数的声明
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#75715e">//Person p1();
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>	cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;p2的年龄为：&#34;</span> <span style="color:#f92672">&lt;&lt;</span> p2.age <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>	cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;p3的年龄为：&#34;</span> <span style="color:#f92672">&lt;&lt;</span> p3.age <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	test01();
</span></span><span style="display:flex;"><span>	system(<span style="color:#e6db74">&#34;pause&#34;</span>);
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><blockquote>
<p>运行结果</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>Person <span style="color:#960050;background-color:#1e0010">无参构造函数的调用</span>
</span></span><span style="display:flex;"><span>Person <span style="color:#960050;background-color:#1e0010">有参构造函数的调用</span>
</span></span><span style="display:flex;"><span>Person <span style="color:#960050;background-color:#1e0010">拷贝构造函数的调用</span>
</span></span><span style="display:flex;"><span>p2的年龄为<span style="color:#960050;background-color:#1e0010">：</span><span style="color:#ae81ff">10</span>
</span></span><span style="display:flex;"><span>p3的年龄为<span style="color:#960050;background-color:#1e0010">：</span><span style="color:#ae81ff">10</span>
</span></span><span style="display:flex;"><span>Person <span style="color:#960050;background-color:#1e0010">析构函数的调用</span>
</span></span><span style="display:flex;"><span>Person <span style="color:#960050;background-color:#1e0010">析构函数的调用</span>
</span></span><span style="display:flex;"><span>Person <span style="color:#960050;background-color:#1e0010">析构函数的调用</span>
</span></span></code></pre></div><p>2）构造函数的调用：显示法</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">test01</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//2、显示法
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	Person p1;
</span></span><span style="display:flex;"><span>	Person p2 <span style="color:#f92672">=</span> Person(<span style="color:#ae81ff">10</span>); <span style="color:#75715e">//有参构造
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	Person p3 <span style="color:#f92672">=</span> Person(p2); <span style="color:#75715e">//拷贝构造
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//Person(10); //匿名对象 特点：当前行执行结束后，系统会立即回收掉匿名对象
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//注意事项2
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#75715e">//不要利用拷贝构造函数 初始化匿名对象 编译器会认为 Person(p3); 等价于 Person p3; 重定义，报错。
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#75715e">//Person(p3);
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>	cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;p2的年龄为：&#34;</span> <span style="color:#f92672">&lt;&lt;</span> p2.age <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>	cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;p3的年龄为：&#34;</span> <span style="color:#f92672">&lt;&lt;</span> p3.age <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	test01();
</span></span><span style="display:flex;"><span>	system(<span style="color:#e6db74">&#34;pause&#34;</span>);
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><blockquote>
<p>运行结果</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>Person <span style="color:#960050;background-color:#1e0010">无参构造函数的调用</span>
</span></span><span style="display:flex;"><span>Person <span style="color:#960050;background-color:#1e0010">有参构造函数的调用</span>
</span></span><span style="display:flex;"><span>Person <span style="color:#960050;background-color:#1e0010">拷贝构造函数的调用</span>
</span></span><span style="display:flex;"><span>p2的年龄为<span style="color:#960050;background-color:#1e0010">：</span><span style="color:#ae81ff">10</span>
</span></span><span style="display:flex;"><span>p3的年龄为<span style="color:#960050;background-color:#1e0010">：</span><span style="color:#ae81ff">10</span>
</span></span><span style="display:flex;"><span>Person <span style="color:#960050;background-color:#1e0010">析构函数的调用</span>
</span></span><span style="display:flex;"><span>Person <span style="color:#960050;background-color:#1e0010">析构函数的调用</span>
</span></span><span style="display:flex;"><span>Person <span style="color:#960050;background-color:#1e0010">析构函数的调用</span>
</span></span></code></pre></div><p>3）构造函数的调用：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">test01</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//3、隐式转换法
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    Person p4 <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>; <span style="color:#75715e">//相当于 写了 Person(10); 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    Person p5 <span style="color:#f92672">=</span> p4; <span style="color:#75715e">//拷贝构造
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>    cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;p4的年龄：&#34;</span> <span style="color:#f92672">&lt;&lt;</span> p4.age <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;p5的年龄：&#34;</span> <span style="color:#f92672">&lt;&lt;</span> p5.age <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	test01();
</span></span><span style="display:flex;"><span>	system(<span style="color:#e6db74">&#34;pause&#34;</span>);
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><blockquote>
<p>运行结果</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>Person <span style="color:#960050;background-color:#1e0010">有参构造函数的调用</span>
</span></span><span style="display:flex;"><span>Person <span style="color:#960050;background-color:#1e0010">拷贝构造函数的调用</span>
</span></span><span style="display:flex;"><span>p4的年龄<span style="color:#960050;background-color:#1e0010">：</span><span style="color:#ae81ff">10</span>
</span></span><span style="display:flex;"><span>p5的年龄<span style="color:#960050;background-color:#1e0010">：</span><span style="color:#ae81ff">10</span>
</span></span><span style="display:flex;"><span>Person <span style="color:#960050;background-color:#1e0010">析构函数的调用</span>
</span></span><span style="display:flex;"><span>Person <span style="color:#960050;background-color:#1e0010">析构函数的调用</span>
</span></span></code></pre></div><h4 id="423-拷贝构造函数调用时机">4.2.3 拷贝构造函数调用时机<a hidden class="anchor" aria-hidden="true" href="#423-拷贝构造函数调用时机">#</a></h4>
<p>C++中拷贝构造函数调用时机通常有三种情况。</p>
<ul>
<li>
<p>使用一个已经创建完毕的对象来初始化一个新对象。</p>
</li>
<li>
<p>值传递的方式给函数参数传值。</p>
</li>
<li>
<p>以值方式返回局部对象。</p>
</li>
</ul>
<blockquote>
<p>示例代码</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#75715e">#include&lt;iostream&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">//拷贝构造函数调用时机
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">//1、使用一个已经创建完毕的对象来初始化一个新对象
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">//2、值传递的方式给函数参数传值
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">//3、值方式返回局部对象
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Person</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">int</span> m_Age;
</span></span><span style="display:flex;"><span>	Person()
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;Person默认构造函数的调用&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	Person(<span style="color:#66d9ef">int</span> age)
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		m_Age <span style="color:#f92672">=</span> age;
</span></span><span style="display:flex;"><span>		cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;Person有参构造函数的调用&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	Person(<span style="color:#66d9ef">const</span> Person<span style="color:#f92672">&amp;</span> p)
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		m_Age <span style="color:#f92672">=</span> p.m_Age;
</span></span><span style="display:flex;"><span>		cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;Person拷贝构造函数的调用&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">~</span>Person()
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;Person默认析构函数的调用&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><p>1、使用一个已经创建完毕的对象来初始化一个新对象。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#75715e">//1、使用一个已经创建完毕的对象来初始化一个新对象
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">test01</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	Person  p1(<span style="color:#ae81ff">20</span>);
</span></span><span style="display:flex;"><span>	Person  p2(p1);
</span></span><span style="display:flex;"><span>	cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;p2的年龄为：&#34;</span> <span style="color:#f92672">&lt;&lt;</span> p2.m_Age <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	test01();
</span></span><span style="display:flex;"><span>	system(<span style="color:#e6db74">&#34;pause&#34;</span>);
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><blockquote>
<p>运行结果</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>Person有参构造函数的调用
</span></span><span style="display:flex;"><span>Person拷贝构造函数的调用
</span></span><span style="display:flex;"><span>p2的年龄为<span style="color:#960050;background-color:#1e0010">：</span><span style="color:#ae81ff">20</span>
</span></span><span style="display:flex;"><span>Person默认析构函数的调用
</span></span><span style="display:flex;"><span>Person默认析构函数的调用
</span></span></code></pre></div><p>2、值传递的方式给函数参数传值</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#75715e">//2、值传递的方式给函数参数传值
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//相当于Person p1 = p;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">doWork</span>(Person p1)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">test02</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	Person p;
</span></span><span style="display:flex;"><span>	doWork(p);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><blockquote>
<p>运行结果</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>Person默认构造函数的调用
</span></span><span style="display:flex;"><span>Person拷贝构造函数的调用
</span></span><span style="display:flex;"><span>Person默认析构函数的调用
</span></span><span style="display:flex;"><span>Person默认析构函数的调用
</span></span></code></pre></div><p>3、值方式返回局部对象</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#75715e">//3、值方式返回局部对象
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>Person <span style="color:#a6e22e">doWork03</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	Person p1;
</span></span><span style="display:flex;"><span>	cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;p1的地址为：&#34;</span> <span style="color:#f92672">&lt;&lt;</span> (<span style="color:#66d9ef">int</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>p1 <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> p1;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">test03</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	Person p <span style="color:#f92672">=</span> doWork03();
</span></span><span style="display:flex;"><span>	cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;p的地址为：&#34;</span> <span style="color:#f92672">&lt;&lt;</span> (<span style="color:#66d9ef">int</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>p <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><blockquote>
<p>运行结果</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>Person默认构造函数的调用
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">010FF</span><span style="color:#ae81ff">894</span>
</span></span><span style="display:flex;"><span>Person拷贝构造函数的调用
</span></span><span style="display:flex;"><span>Person默认析构函数的调用
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">010FF</span><span style="color:#ae81ff">98</span>C
</span></span><span style="display:flex;"><span>Person默认析构函数的调用
</span></span></code></pre></div><blockquote>
<p>运行结果（VS2022）编译器会优化</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>Person默认构造函数的调用
</span></span><span style="display:flex;"><span>p1的地址为<span style="color:#960050;background-color:#1e0010">：</span><span style="color:#ae81ff">000000</span>B083EFF5D4
</span></span><span style="display:flex;"><span>p的地址为<span style="color:#960050;background-color:#1e0010">：</span><span style="color:#ae81ff">000000</span>B083EFF5D4
</span></span><span style="display:flex;"><span>Person默认析构函数的调用
</span></span></code></pre></div><h4 id="424-构造函数调用规则">4.2.4 构造函数调用规则<a hidden class="anchor" aria-hidden="true" href="#424-构造函数调用规则">#</a></h4>
<p>默认情况下，c++编译器至少给一个类添加3个函数。</p>
<p>1．默认构造函数(无参，函数体为空)。</p>
<p>2．默认析构函数(无参，函数体为空)。</p>
<p>3．默认拷贝构造函数，对属性进行值拷贝。</p>
<p>构造函数调用规则如下：</p>
<ul>
<li>
<p>如果用户定义有参构造函数，c++不在提供默认无参构造，但是会提供默认拷贝构造。</p>
</li>
<li>
<p>如果用户定义拷贝构造函数，c++不会再提供其他构造函数。</p>
</li>
</ul>
<blockquote>
<p>示例代码</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#75715e">#include&lt;iostream&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;
</span></span><span style="display:flex;"><span><span style="color:#75715e">//构造函数的调用规则
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//1、创建一个类，C++编译器会给每个类都添加至少三个函数
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//默认构造(空实现)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//析构函数(空实现)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//拷贝构造(值拷贝)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">//2、
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// 如果我们写了有参构造函数，编译器就不再提供默认构造，依然提供拷贝构造
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// 如果我们写了拷贝构造函数，编译器就不再提供其他普通构造函数了
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Person</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">int</span> m_Age;
</span></span><span style="display:flex;"><span>	Person()
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;Person默认构造函数的调用&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	Person(<span style="color:#66d9ef">int</span> age)
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		m_Age <span style="color:#f92672">=</span> age;
</span></span><span style="display:flex;"><span>		cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;Person有参构造函数的调用&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">/*Person(const Person&amp; p)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">	{
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">		m_Age = p.m_Age;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">		cout &lt;&lt; &#34;Person拷贝构造函数的调用&#34; &lt;&lt; endl;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">	}*/</span>
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">~</span>Person()
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;Person默认析构函数的调用&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">test01</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	Person p;
</span></span><span style="display:flex;"><span>	p.m_Age <span style="color:#f92672">=</span> <span style="color:#ae81ff">18</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	Person p2(p);
</span></span><span style="display:flex;"><span>	cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;p2的年龄为：&#34;</span> <span style="color:#f92672">&lt;&lt;</span> p2.m_Age <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	test01();
</span></span><span style="display:flex;"><span>	system(<span style="color:#e6db74">&#34;pause&#34;</span>);
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><blockquote>
<p>运行结果</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>Person默认构造函数的调用
</span></span><span style="display:flex;"><span>p2的年龄为<span style="color:#960050;background-color:#1e0010">：</span><span style="color:#ae81ff">18</span>
</span></span><span style="display:flex;"><span>Person默认析构函数的调用
</span></span><span style="display:flex;"><span>Person默认析构函数的调用
</span></span></code></pre></div><p>可以看到我们定义了有参构造函数，而我们没有定义拷贝构造函数，但是编译器为我们提供了拷贝构造函数，将p.m_Age = 18值拷贝给了p2。</p>
<h4 id="425-深拷贝与浅拷贝">4.2.5 深拷贝与浅拷贝<a hidden class="anchor" aria-hidden="true" href="#425-深拷贝与浅拷贝">#</a></h4>
<p>深浅拷贝是面试经典问题，也是常见的一个坑。</p>
<p>浅拷贝：简单的赋值拷贝操作。</p>
<p>深拷贝：在堆区重新申请空间，进行拷贝操作。</p>
<blockquote>
<p>示例代码</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#75715e">#include&lt;iostream&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;
</span></span><span style="display:flex;"><span><span style="color:#75715e">//深拷贝与浅拷贝
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Person</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">int</span> m_Age;
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">int</span> <span style="color:#f92672">*</span>m_Height; <span style="color:#75715e">//身高
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>	Person() 
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;Person的默认构造函数调用&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	Person(<span style="color:#66d9ef">int</span> age, <span style="color:#66d9ef">int</span> height)
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;Person的有参构造函数调用&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>		m_Age <span style="color:#f92672">=</span> age;
</span></span><span style="display:flex;"><span>		m_Height <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">int</span>(height);
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//自己实现拷贝构造函数，解决浅拷贝带来的问题
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	Person(<span style="color:#66d9ef">const</span> Person<span style="color:#f92672">&amp;</span> p)
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;Person 拷贝构造函数调用&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>		m_Age <span style="color:#f92672">=</span> p.m_Age;
</span></span><span style="display:flex;"><span>		<span style="color:#75715e">//m_Height = p.m_Height; 编译器默认实现就是这行代码
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		<span style="color:#75715e">//深拷贝操作
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		m_Height <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">int</span>(<span style="color:#f92672">*</span>p.m_Height);
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">~</span>Person()
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		<span style="color:#75715e">//析构代码，将堆区开辟数据做释放操作
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		<span style="color:#66d9ef">if</span> (m_Height <span style="color:#f92672">!=</span> NULL)
</span></span><span style="display:flex;"><span>		{
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">delete</span> m_Height;
</span></span><span style="display:flex;"><span>			m_Height <span style="color:#f92672">=</span> NULL;
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>		cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;Person的默认析构函数调用&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl; 
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">test01</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	Person p1(<span style="color:#ae81ff">18</span>,<span style="color:#ae81ff">160</span>);
</span></span><span style="display:flex;"><span>	Person p2(p1);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;p1的年龄为：&#34;</span>  <span style="color:#f92672">&lt;&lt;</span> p1.m_Age <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34; 身高为：&#34;</span> <span style="color:#f92672">&lt;&lt;</span> <span style="color:#f92672">*</span>p1.m_Height <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>	cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;p2的年龄为：&#34;</span> <span style="color:#f92672">&lt;&lt;</span> p2.m_Age <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34; 身高为：&#34;</span> <span style="color:#f92672">&lt;&lt;</span> <span style="color:#f92672">*</span>p2.m_Height <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	test01();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	system(<span style="color:#e6db74">&#34;pause&#34;</span>);
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><blockquote>
<p>运行结果</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>Person的有参构造函数调用
</span></span><span style="display:flex;"><span>Person <span style="color:#960050;background-color:#1e0010">拷贝构造函数调用</span>
</span></span><span style="display:flex;"><span>p1的年龄为<span style="color:#960050;background-color:#1e0010">：</span><span style="color:#ae81ff">18</span> <span style="color:#960050;background-color:#1e0010">身高为：</span><span style="color:#ae81ff">160</span>
</span></span><span style="display:flex;"><span>p2的年龄为<span style="color:#960050;background-color:#1e0010">：</span><span style="color:#ae81ff">18</span> <span style="color:#960050;background-color:#1e0010">身高为：</span><span style="color:#ae81ff">160</span>
</span></span><span style="display:flex;"><span>Person的默认析构函数调用
</span></span><span style="display:flex;"><span>Person的默认析构函数调用
</span></span></code></pre></div><p><img loading="lazy" src="4-%e7%b1%bb%e5%92%8c%e5%af%b9%e8%b1%a1-2.png" alt="4-类和对象-2.png"  />
</p>
<p>假如，我们没有自行设计拷贝构造函数，那么编译器会默认为浅拷贝，也就是说首先p2析构，内存释放，然后p1析构，内存释放，然而此时对应内存已经释放过了，无法释放第二次，所以会报错。</p>
<p>浅拷贝的意思就是 p1.m_Height在堆区开辟内存，对应的地址为0x0011，而拷贝给p2.m_Height，它对应的地址也是0x0011。</p>
<p>而深拷贝也就是说， p1.m_Height在堆区开辟内存，对应的地址为0x0011，而拷贝给p2.m_Height，p2.m_Height开辟了一个新地址，0x0022，但是0x0011和0x0022的内容都是160。</p>
<blockquote>
<p>总结：如果属性有在堆区开辟的，一定要自己提供拷贝构造函数，防止浅拷贝带来的问题。</p>
</blockquote>
<h4 id="426-初始化列表">4.2.6 初始化列表<a hidden class="anchor" aria-hidden="true" href="#426-初始化列表">#</a></h4>
<p><strong>作用：</strong></p>
<p>C++提供了初始化列表语法，用来初始化属性。</p>
<p><strong>语法：</strong><code>构造函数()：属性1(值1),属性2（值2）... {}</code></p>
<blockquote>
<p>示例代码</p>
</blockquote>
<p>1、传统初始化操作。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#75715e">#include&lt;iostream&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">//初始化列表
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Person</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//传统初始化操作
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	Person(<span style="color:#66d9ef">int</span> a, <span style="color:#66d9ef">int</span> b, <span style="color:#66d9ef">int</span> c)
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		m_A <span style="color:#f92672">=</span> a;
</span></span><span style="display:flex;"><span>		m_B <span style="color:#f92672">=</span> b;
</span></span><span style="display:flex;"><span>		m_C <span style="color:#f92672">=</span> c;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">PrintPerson</span>()
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;m_A：&#34;</span> <span style="color:#f92672">&lt;&lt;</span> m_A <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>      cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;m_B：&#34;</span> <span style="color:#f92672">&lt;&lt;</span> m_B <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>      cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;m_C：&#34;</span> <span style="color:#f92672">&lt;&lt;</span> m_C <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">int</span> m_A;
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">int</span> m_B;
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">int</span> m_C;
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">test01</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	Person p(<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>);
</span></span><span style="display:flex;"><span>    p.PrintPerson();
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	test01();
</span></span><span style="display:flex;"><span>	system(<span style="color:#e6db74">&#34;pause&#34;</span>);
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><blockquote>
<p>运行结果</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>m_A<span style="color:#960050;background-color:#1e0010">：</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>m_B<span style="color:#960050;background-color:#1e0010">：</span><span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>m_C<span style="color:#960050;background-color:#1e0010">：</span><span style="color:#ae81ff">3</span>
</span></span></code></pre></div><p>2、初始化列表初始化属性。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#75715e">#include&lt;iostream&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">//初始化列表
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Person</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//初始化列表初始化属性
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	Person(<span style="color:#66d9ef">int</span> a, <span style="color:#66d9ef">int</span> b, <span style="color:#66d9ef">int</span> c) <span style="color:#f92672">:</span>m_A(a), m_B(b), m_C(b){}
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">PrintPerson</span>()
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;m_A：&#34;</span> <span style="color:#f92672">&lt;&lt;</span> m_A <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>		cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;m_B：&#34;</span> <span style="color:#f92672">&lt;&lt;</span> m_B <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>		cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;m_C：&#34;</span> <span style="color:#f92672">&lt;&lt;</span> m_C <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">int</span> m_A;
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">int</span> m_B;
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">int</span> m_C;
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">test01</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	Person p(<span style="color:#ae81ff">10</span>,<span style="color:#ae81ff">20</span>,<span style="color:#ae81ff">30</span>);
</span></span><span style="display:flex;"><span>	p.PrintPerson();
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	test01();
</span></span><span style="display:flex;"><span>	system(<span style="color:#e6db74">&#34;pause&#34;</span>);
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><blockquote>
<p>运行结果</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>m_A<span style="color:#960050;background-color:#1e0010">：</span><span style="color:#ae81ff">10</span>
</span></span><span style="display:flex;"><span>m_B<span style="color:#960050;background-color:#1e0010">：</span><span style="color:#ae81ff">20</span>
</span></span><span style="display:flex;"><span>m_C<span style="color:#960050;background-color:#1e0010">：</span><span style="color:#ae81ff">20</span>
</span></span></code></pre></div><h4 id="427-类对象作为类成员">4.2.7 类对象作为类成员<a hidden class="anchor" aria-hidden="true" href="#427-类对象作为类成员">#</a></h4>
<p>C++类中的成员可以是另一个类的对象，我们称该成员为 对象成员。</p>
<p>例如：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">A</span> {}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">B</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    A a<span style="color:#960050;background-color:#1e0010">；</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>B类中有对象A作为成员，A为对象成员。</p>
<p>那么当创建B对象时，A与B的构造和析构的顺序是谁先谁后？</p>
<blockquote>
<p>实验代码</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#75715e">#include&lt;iostream&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include&lt;string&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">//类对象作为类成员
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//手机类
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Phone</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>	Phone(string PName)
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;Phone的构造函数调用&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>		m_PName <span style="color:#f92672">=</span> PName;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">~</span>Phone()
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;Phone的析构函数调用&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>	string m_PName;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Person</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//Phone m_Phone = pName 隐式转换法
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	Person(string name, string pName)<span style="color:#f92672">:</span>m_Name(name),m_Phone(pName)
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;Person的构造函数调用&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">~</span>Person()
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;Person的析构函数调用&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//姓名
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	string m_Name;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//手机
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	Phone m_Phone;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">//其他类对象作为本类成员，构造时候先构造类对象，再构造自身，析构的顺序与构造相反
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">test01</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	Person p(<span style="color:#e6db74">&#34;张三&#34;</span>, <span style="color:#e6db74">&#34;苹果MAX&#34;</span>);
</span></span><span style="display:flex;"><span>	cout <span style="color:#f92672">&lt;&lt;</span> p.m_Name <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;拿着：&#34;</span> <span style="color:#f92672">&lt;&lt;</span> p.m_Phone.m_PName <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	test01();
</span></span><span style="display:flex;"><span>	system(<span style="color:#e6db74">&#34;pause&#34;</span>);
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><blockquote>
<p>运行结果</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>Phone的构造函数调用
</span></span><span style="display:flex;"><span>Person的构造函数调用
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">张三拿着：苹果</span>MAX
</span></span><span style="display:flex;"><span>Person的析构函数调用
</span></span><span style="display:flex;"><span>Phone的析构函数调用
</span></span></code></pre></div><p>结论：其他类对象作为本类成员，构造时候先构造类对象，再构造自身，析构的顺序与构造相反。</p>
<h4 id="428-静态成员">4.2.8 静态成员<a hidden class="anchor" aria-hidden="true" href="#428-静态成员">#</a></h4>
<p>静态成员就是在成员变量和成员函数前加上关键字<code>static</code>，称为静态成员。</p>
<p>静态成员分为：</p>
<ul>
<li>
<p>静态成员变量</p>
<ul>
<li>
<p>所有对象共享同一份数据</p>
</li>
<li>
<p>在编译阶段分配内存</p>
</li>
<li>
<p>类内声明，类外初始化</p>
</li>
</ul>
</li>
<li>
<p>静态成员函数</p>
<ul>
<li>
<p>所有对象共享同一个函数</p>
</li>
<li>
<p>静态成员函数只能访问静态成员变量</p>
</li>
</ul>
</li>
</ul>
<blockquote>
<p>实验代码-静态成员变量</p>
</blockquote>
<blockquote>
<p>实验一 静态成员变量的特点</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#75715e">#include&lt;iostream&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">//静态成员变量
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Person</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//1 所有对象都共享同一份数据
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#75715e">//2 编译阶段就分配内存
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#75715e">//3 类内声明 类外初始化操作
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">static</span> <span style="color:#66d9ef">int</span> m_A;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> Person<span style="color:#f92672">::</span>m_A <span style="color:#f92672">=</span> <span style="color:#ae81ff">100</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">test01</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	Person p;
</span></span><span style="display:flex;"><span>	cout <span style="color:#f92672">&lt;&lt;</span> p.m_A <span style="color:#f92672">&lt;&lt;</span> endl; <span style="color:#75715e">//输出100
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>	Person p2;
</span></span><span style="display:flex;"><span>	p2.m_A <span style="color:#f92672">=</span> <span style="color:#ae81ff">200</span>;
</span></span><span style="display:flex;"><span>	cout <span style="color:#f92672">&lt;&lt;</span> p2.m_A <span style="color:#f92672">&lt;&lt;</span> endl; <span style="color:#75715e">//输出200
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>	cout <span style="color:#f92672">&lt;&lt;</span> p.m_A <span style="color:#f92672">&lt;&lt;</span> endl; <span style="color:#75715e">//输出200
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	test01();	
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><blockquote>
<p>运行结果</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#ae81ff">100</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">200</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">200</span>
</span></span></code></pre></div><blockquote>
<p>结论</p>
</blockquote>
<ol>
<li>
<p>静态成员变量需要类内声明 类外初始化操作。</p>
</li>
<li>
<p>所有对象都共享同一份数据，从输出结果为100，200，200即可看出。</p>
</li>
<li>
<p>编译阶段就分配内存。</p>
</li>
</ol>
<blockquote>
<p>实验二 静态成员变量的访问方式</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#75715e">#include&lt;iostream&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">//静态成员变量
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Person</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">static</span> <span style="color:#66d9ef">int</span> m_A;
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> Person<span style="color:#f92672">::</span>m_A <span style="color:#f92672">=</span> <span style="color:#ae81ff">100</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">test02</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//静态成员变量 不属于某个对象上 所有对象都共享同一份数据
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#75715e">//因此 静态变量有2种访问方式
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//1、通过对象进行访问
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	Person p;
</span></span><span style="display:flex;"><span>	cout <span style="color:#f92672">&lt;&lt;</span> p.m_A <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//2、通过类名进行访问
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	cout <span style="color:#f92672">&lt;&lt;</span> Person<span style="color:#f92672">::</span>m_A <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	test02();	
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><blockquote>
<p>运行结果</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#ae81ff">100</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">100</span>
</span></span></code></pre></div><blockquote>
<p>结论</p>
</blockquote>
<p>静态成员变量 不属于某个对象上 所有对象都共享同一份数据。因此 静态变量有2种访问方式</p>
<ol>
<li>
<p>通过对象进行访问。</p>
</li>
<li>
<p>通过类名进行访问。</p>
</li>
</ol>
<blockquote>
<p>实验三 静态成员变量的访问权限</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#75715e">#include&lt;iostream&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">//静态成员变量
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Person</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">static</span> <span style="color:#66d9ef">int</span> m_A;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">static</span> <span style="color:#66d9ef">int</span> m_B;
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> Person<span style="color:#f92672">::</span>m_A <span style="color:#f92672">=</span> <span style="color:#ae81ff">100</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> Person<span style="color:#f92672">::</span>m_B <span style="color:#f92672">=</span> <span style="color:#ae81ff">200</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">test02</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	cout <span style="color:#f92672">&lt;&lt;</span> Person<span style="color:#f92672">::</span>m_A <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//cout &lt;&lt; Person::m_B &lt;&lt; endl; 类外访问不到私有静态成员变量
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	test02();	
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><blockquote>
<p>运行结果</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#ae81ff">100</span>
</span></span></code></pre></div><blockquote>
<p>结论</p>
</blockquote>
<p>静态成员变量也是有访问权限的。类外访问不到私有静态成员变量</p>
<blockquote>
<p><strong>静态成员变量-总结</strong></p>
</blockquote>
<p><strong>静态成员变量的特点</strong></p>
<ol>
<li>
<p>所有对象都共享同一份数据。</p>
</li>
<li>
<p>编译阶段就分配内存。</p>
</li>
<li>
<p>类内声明 类外初始化操作。</p>
</li>
</ol>
<p><strong>静态成员变量的访问方式</strong></p>
<ol>
<li>
<p>通过对象进行访问。</p>
</li>
<li>
<p>通过类名进行访问。</p>
</li>
</ol>
<p><strong>静态成员变量的访问权限</strong></p>
<ol>
<li>类外访问不到私有静态成员变量。</li>
</ol>
<blockquote>
<p>实验代码-静态成员函数</p>
</blockquote>
<blockquote>
<p>实验二 静态成员函数可以访问哪些静态成员变量</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#75715e">#include&lt;iostream&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">//静态成员函数
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//所有对象共享同一个函数
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//静态成员函数只能访问静态成员变量
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Person</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//静态成员函数
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> func()
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;static void func()的调用&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>		m_A <span style="color:#f92672">=</span> <span style="color:#ae81ff">200</span>; <span style="color:#75715e">//静态成员函数 可以访问 静态成员变量
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		<span style="color:#75715e">//m_B = 200; 静态成员函数 不可以访问 非静态成员变量，无法区分到底是哪个对象的m_B属性
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">static</span> <span style="color:#66d9ef">int</span> m_A; <span style="color:#75715e">//静态成员变量
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">int</span> m_B <span style="color:#f92672">=</span> <span style="color:#ae81ff">100</span>;
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> Person<span style="color:#f92672">::</span>m_A <span style="color:#f92672">=</span> <span style="color:#ae81ff">100</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><blockquote>
<p>结论</p>
</blockquote>
<ol>
<li>
<p>静态成员函数 可以访问 静态成员变量。</p>
</li>
<li>
<p>静态成员函数 不可以访问 非静态成员变量。</p>
</li>
</ol>
<p><strong>为什么静态成员函数不可以访问非静态成员变量？</strong></p>
<p>解释：非静态成员必须与特定的对象相对，举个例子，先<code>Person p1</code>，然后调用<code>p1.func()</code>，再<code>Perosn p2</code>，然后调用<code>p2.func()</code>，此时编译器是无法判断你的<code>m_B</code>是和哪个对象对应的，所以说静态成员函数 不可以访问 非静态成员变量。</p>
<p>同样也可以解释为什么静态成员函数 可以访问 静态成员变量，因为<code>m_A</code>是所有对象共享的。</p>
<h2 id="end">END<a hidden class="anchor" aria-hidden="true" href="#end">#</a></h2>
<blockquote>
<p><strong>END：本节内容到此结束。</strong></p>
</blockquote>
<p>个人提升之余，别忘了和小伙伴积极交流，很多人觉得他们在思考，而实际上他们只是在重新整理自己的偏见。请珍惜和他人交流讨论的机会。</p>
<br>
<div align = "center">
<img src = "https://testingcf.jsdelivr.net/gh/EddyCliff/ChartBed/Blog-Common-Images/END1.jpg" alt = "END1.jpg" width = "70%" height = "auto">
</div>
<br>
<p>希望你每一天都有所收获，进步up up up。今天的我们并不比昨天更聪明，但一定要比昨天更睿智。</p>
<br>
<div align = "center">
<img src = "https://testingcf.jsdelivr.net/gh/EddyCliff/ChartBed/Blog-Common-Images/END2.jpg" alt = "END2.jpg" width = "70%" height = "auto">
</div>


        </div>

        <footer class="post-footer">
            
<nav class="paginav">
  <a class="prev" href="https://eddyblog.cn/posts/tech/database_sqlite/">
    <span class="title">« 上一页</span>
    <br>
    <span>SQLite数据库简介及使用指南</span>
  </a>
  <a class="next" href="https://eddyblog.cn/posts/tech/cpp-programming-p3/">
    <span class="title">下一页 »</span>
    <br>
    <span>C&#43;&#43;编程入门：函数提高-函数重载</span>
  </a>
</nav>

        </footer>
    </div>
</article>
</main>

<footer class="footer">
    <span>
        Copyright
        &copy;
        -2024
        <a href="https://eddyblog.cn/" style="color:#939393;">Eddy&#39;s blog</a>
        All Rights Reserved
    </span>
    <a href="https://beian.miit.gov.cn/" target="_blank" style="color:#939393;"></a>&nbsp;
    <span>
        <a target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=null"
           style="display:inline-block;text-decoration:none;height:20px;color:#939393;">
            <img src="" style="float:left;margin: 0px 5px 0px 0px;"/>
            
        </a>
    </span>
    <span id="busuanzi_container">
        <span class="fa fa-user"></span> <span id="busuanzi_value_site_uv"></span>
        <span class="fa fa-eye"></span> <span id="busuanzi_value_site_pv"></span>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <span class="topInner">
        <svg class="topSvg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
            <path d="M12 6H0l6-6z"/>
        </svg>
        <span id="read_progress"></span>
    </span>
</a>

<script>
    document.addEventListener('scroll', function (e) {
        const readProgress = document.getElementById("read_progress");
        const scrollHeight = document.documentElement.scrollHeight;
        const clientHeight = document.documentElement.clientHeight;
        const scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
        readProgress.innerText = ((scrollTop / (scrollHeight - clientHeight)).toFixed(2) * 100).toFixed(0);
    })
</script>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });
</script>
<script>
    let mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 200 || document.documentElement.scrollTop > 200) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };
</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        (function() {
            document.cookie = "change-themes" + "="+ escape ("false");
        })()

        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    });
</script>

<script>
    document.body.addEventListener('copy', function (e) {
        if (window.getSelection().toString() && window.getSelection().toString().length > 50) {
            let clipboardData = e.clipboardData || window.clipboardData;
            if (clipboardData) {
                e.preventDefault();
                let htmlData = window.getSelection().toString() +
                    '\r\n\n————————————————\r\n' +
                    '版权声明：本文为「'+"Eddy's blog"+'」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。' +
                '\r\n原文链接：' + location.href;
                let textData = window.getSelection().toString() +
                    '\r\n\n————————————————\r\n' +
                    '版权声明：本文为「'+"Eddy's blog"+'」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。' +
                '\r\n原文链接：' + location.href;
                clipboardData.setData('text/html', htmlData);
                clipboardData.setData('text/plain', textData);
            }
        }
    });
</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;
        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerText = '复制';

        function copyingDone() {
            copybutton.innerText = '已复制！';
            setTimeout(() => {
                copybutton.innerText = '复制';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                let text = codeblock.textContent +
                    '\r\n————————————————\r\n' +
                    '版权声明：本文为「'+"Eddy's blog"+'」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。' +
                '\r\n原文链接：' + location.href;
                navigator.clipboard.writeText(text);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) {}
            selection.removeRange(range);
        });

        let language = codeblock.className.replaceAll("language-", "")
        let macTool = document.createElement("div")
        let macTool1 = document.createElement("div")
        let macTool2 = document.createElement("div")
        let macTool3 = document.createElement("div")
        let languageType = document.createElement("div")
        languageType.innerText = language
        macTool.setAttribute('class', 'mac-tool')
        macTool1.setAttribute('class', 'mac bb1')
        macTool2.setAttribute('class', 'mac bb2')
        macTool3.setAttribute('class', 'mac bb3')
        languageType.setAttribute('class', 'language-type')
        macTool.appendChild(macTool1)
        macTool.appendChild(macTool2)
        macTool.appendChild(macTool3)
        macTool.appendChild(languageType)

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
            container.appendChild(macTool)
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
            container.appendChild(macTool)
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
            container.appendChild(macTool)
        }
    });
</script>

<script type="text/javascript"
        async
        src="https://cdn.bootcss.com/mathjax/2.7.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    displayMath: [['$$','$$'], ['\[\[','\]\]']],
    processEscapes: true,
    processEnvironments: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
    TeX: { equationNumbers: { autoNumber: "AMS" },
         extensions: ["AMSmath.js", "AMSsymbols.js"] }
  }
});

MathJax.Hub.Queue(function() {
    
    
    
    var all = MathJax.Hub.getAllJax(), i;
    for(i = 0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
    }
});
</script>

<style>
code.has-jax {
    font: inherit;
    font-size: 100%;
    background: inherit;
    border: inherit;
    color: #515151;
}
</style></body>

</html>
