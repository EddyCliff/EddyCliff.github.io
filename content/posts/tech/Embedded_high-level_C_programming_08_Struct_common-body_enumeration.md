---
title: "ã€åµŒå…¥å¼é«˜çº§Cç¼–ç¨‹ã€‘ç¬¬å…«ç«  ç»“æ„ä½“ï¼Œå…±ç”¨ä½“ï¼Œæšä¸¾"
date: 2023-10-01T00:17:58+08:00
lastmod: 2023-10-01T00:17:58+08:00
author: ["Eddy"]
keywords: 
- C programming
- Embedded Development
- Struct
- common body
- enumeration
categories: 
- 
tags: 
- C programming
- Embedded Development
- Struct
- common body
- enumeration
description: 
weight:
slug: ""
draft: false # æ˜¯å¦ä¸ºè‰ç¨¿
comments: false
reward: false # æ‰“èµ
mermaid: true #æ˜¯å¦å¼€å¯mermaid
showToc: true # æ˜¾ç¤ºç›®å½•
TocOpen: true # è‡ªåŠ¨å±•å¼€ç›®å½•
hidemeta: false # æ˜¯å¦éšè—æ–‡ç« çš„å…ƒä¿¡æ¯ï¼Œå¦‚å‘å¸ƒæ—¥æœŸã€ä½œè€…ç­‰
disableShare: true # åº•éƒ¨ä¸æ˜¾ç¤ºåˆ†äº«æ 
showbreadcrumbs: true #é¡¶éƒ¨æ˜¾ç¤ºè·¯å¾„
cover:
    image: "https://testingcf.jsdelivr.net/gh/EddyCliff/ChartBed/BlogCover/c2.jpg" #å›¾ç‰‡è·¯å¾„ä¾‹å¦‚ï¼šposts/tech/123/123.png
    caption: "" #å›¾ç‰‡åº•éƒ¨æè¿°
    alt: ""
    relative: false
---

## ç¬¬å…«ç«  ç»“æ„ä½“ï¼Œå…±ç”¨ä½“ï¼Œæšä¸¾

### ä¸€ã€ç»“æ„ä½“ç±»å‹çš„æ¦‚å¿µåŠå®šä¹‰

#### 1.1 åŸºæœ¬æ¦‚è¿°

**æ„é€ ç±»å‹ï¼š**
ä¸æ˜¯åŸºæœ¬ç±»å‹çš„æ•°æ®ç»“æ„ä¹Ÿä¸æ˜¯æŒ‡é’ˆï¼Œå®ƒæ˜¯è‹¥å¹²ä¸ªç›¸åŒæˆ–ä¸åŒç±»å‹çš„æ•°æ®æ„æˆçš„é›†åˆ
å¸¸ç”¨çš„æ„é€ ç±»å‹æœ‰æ•°ç»„ã€ç»“æ„ä½“ã€å…±ç”¨ä½“


æ•°ç»„ç”¨äºä¿å­˜å¤šä¸ªç›¸åŒç±»å‹çš„æ•°æ®
ç»“æ„ä½“ç”¨äºä¿å­˜å¤šä¸ªä¸åŒç±»å‹çš„æ•°æ®



#### 1.2 ç»“æ„ä½“çš„æ¦‚å¿µ

ç»“æ„ä½“æ˜¯ä¸€ç§æ„é€ ç±»å‹çš„æ•°æ®ç»“æ„ï¼Œ

æ˜¯ä¸€ç§æˆ–å¤šç§åŸºæœ¬ç±»å‹æˆ–æ„é€ ç±»å‹çš„æ•°æ®çš„é›†åˆã€‚



#### 1.3 ç»“æ„ä½“ç±»å‹çš„å®šä¹‰

**1.3.1 å…ˆå®šä¹‰ç»“æ„ä½“ç±»å‹ï¼Œå†å»å®šä¹‰ç»“æ„ä½“å˜é‡**

```C
struct ç»“æ„ä½“ç±»å‹å{
  æˆå‘˜åˆ—è¡¨
};
```

ä¾‹å­ï¼š

```C
struct stu{
  int num;
  char name[20];
  char sex;
};
```

//æœ‰äº†ç»“æ„ä½“ç±»å‹åï¼Œå°±å¯ä»¥ç”¨ç±»å‹å®šä¹‰å˜é‡äº†

`struct stu lucy, bob, lilei;`    //å®šä¹‰äº†ä¸‰ä¸ªstruct stuç±»å‹çš„å˜é‡ï¼Œæ³¨æ„ä¸è¦æŠŠstructçœç•¥

æ¯ä¸ªå˜é‡éƒ½æœ‰ä¸‰ä¸ªæˆå‘˜ï¼Œåˆ†åˆ«æ˜¯`num` `name` `sex`



**1.3.2 åœ¨å®šä¹‰ç»“æ„ä½“ç±»å‹çš„æ—¶å€™é¡ºä¾¿å®šä¹‰ç»“æ„ä½“å˜é‡ï¼Œä»¥åè¿˜å¯ä»¥å®šä¹‰ç»“æ„ä½“å˜é‡**

```C
struct ç»“æ„ä½“ç±»å‹å{
  æˆå‘˜åˆ—è¡¨;
}ç»“æ„ä½“å˜é‡1,å˜é‡2;
struct ç»“æ„ä½“ç±»å‹å å˜é‡3ï¼Œå˜é‡4ï¼›
```

ä¾‹å­ï¼š

```C
struct stu{
  int num;
  char name[20];
  char sex;
}lucy,bob,lilei;
struct stu xiaohong,xiaoming;
```

æ³¨æ„ï¼šä¸€èˆ¬ç»“æ„ä½“ç±»å‹éƒ½ä¼šå®šä¹‰åœ¨å…¨å±€ï¼Œä¹Ÿå°±æ˜¯mainå‡½æ•°çš„å¤–é¢ã€‚

æ‰€ä»¥åœ¨å®šä¹‰ç»“æ„ä½“ç±»å‹çš„åŒæ—¶å®šä¹‰å˜é‡ï¼Œè¿™äº›å˜é‡ä¸€èˆ¬éƒ½æ˜¯å…¨å±€å˜é‡ã€‚

å®šä¹‰å®Œç±»å‹ä¹‹åå®šä¹‰çš„ç»“æ„ä½“å˜é‡å†…å­˜åˆ†é…è¦çœ‹å®šä¹‰çš„ä½ç½®ã€‚



**1.3.3 æ— åç»“æ„ä½“çš„å®šä¹‰**

åœ¨å®šä¹‰ç»“æ„ä½“ç±»å‹çš„æ—¶å€™ï¼Œæ²¡æœ‰ç»“æ„ä½“ç±»å‹åï¼Œé¡ºä¾¿å®šä¹‰ç»“æ„ä½“å˜é‡ï¼Œå› ä¸ºæ²¡æœ‰ç±»å‹åï¼Œæ‰€ä»¥ä»¥åä¸èƒ½å†å®šä¹‰ç›¸å…³ç±»å‹çš„æ•°æ®äº†

```C
struct {
  æˆå‘˜åˆ—è¡¨;
}å˜é‡1ï¼Œå˜é‡2;
```

æ³¨æ„ï¼šæ— åç»“æ„ä½“ç”±äºæ²¡æœ‰ç»“æ„ä½“åï¼Œæ‰€ä»¥å®šä¹‰å®Œä¹‹åæ˜¯æ— æ³•åœ¨å®šä¹‰ç»“æ„ä½“å˜é‡çš„ï¼Œåªèƒ½åœ¨å®šä¹‰ç±»å‹çš„åŒæ—¶å®šä¹‰ç»“æ„ä½“å˜é‡ã€‚

ä¾‹å­ï¼š

```C
struct {
  int num;
  char name[20];
  char sex;
}lucy,bob;
```



**1.3.4 ç»™ç»“æ„ä½“ç±»å‹å–åˆ«å**

é€šå¸¸å’±ä»¬å°†ä¸€ä¸ªç»“æ„ä½“ç±»å‹é‡æ–°èµ·ä¸ªç±»å‹åï¼Œç”¨æ–°çš„ç±»å‹åæ›¿ä»£åŸå…ˆçš„ç±»å‹

```C
typedef struct ç»“æ„ä½“å {
  æˆå‘˜åˆ—è¡¨;
}é‡æ–°å®šä¹‰çš„ç»“æ„ä½“ç±»å‹åA;
```

æ³¨æ„ï¼štypedefä¸»è¦ç”¨äºç»™ä¸€ä¸ªç±»å‹å–åˆ«åï¼Œæ­¤æ—¶ç›¸å½“äºç»™å½“å‰ç»“æ„ä½“é‡æ–°èµ·äº†ä¸€ä¸ªç±»å‹åä¸ºAï¼Œç›¸å½“äº struct ç»“æ„ä½“åï¼Œæ‰€ä»¥å¦‚æœç»“æ„ä½“è¦å–åˆ«åï¼Œä¸€èˆ¬ä¸éœ€è¦å…ˆç»™ç»“æ„ä½“å®šä¹‰åå­—ï¼Œå®šä¹‰ç»“æ„ä½“å˜é‡æ—¶ï¼Œç›´æ¥ä½¿ç”¨Aå³å¯ï¼Œä¸ç”¨åŠ struct

ä¾‹å­ï¼š

```C
typedef struct stu{
  int num;
  char name[20];
  char sex;
}STU;
```

ä»¥åSTU å°±ç›¸å½“äº struct stu

`STU lucy;` å’Œ`struct stu lucy;` æ˜¯ç­‰ä»·çš„ï¼Œæ‰€ä»¥å¯ä»¥ä¸æŒ‡å®šstuè¿™ä¸ªåå­—



### äºŒã€ç»“æ„ä½“å˜é‡çš„å®šä¹‰åˆå§‹åŒ–åŠä½¿ç”¨

#### 2.1 ç»“æ„ä½“å˜é‡çš„å®šä¹‰å’Œåˆå§‹åŒ–

ç»“æ„ä½“å˜é‡ï¼Œæ˜¯ä¸ªå˜é‡ï¼Œè¿™ä¸ªå˜é‡æ˜¯è‹¥å¹²ä¸ªæ•°æ®çš„é›†åˆ

æ³¨ï¼š

(1)ï¼šåœ¨å®šä¹‰ç»“æ„ä½“å˜é‡ä¹‹å‰é¦–å…ˆå¾—æœ‰ç»“æ„ä½“ç±»å‹ï¼Œç„¶ååœ¨å®šä¹‰å˜é‡

(2)ï¼šåœ¨å®šä¹‰ç»“æ„ä½“å˜é‡çš„æ—¶å€™ï¼Œå¯ä»¥é¡ºä¾¿ç»™ç»“æ„ä½“å˜é‡èµ‹åˆå€¼ï¼Œè¢«ç§°ä¸ºç»“æ„ä½“çš„åˆå§‹åŒ–

(3)ï¼šç»“æ„ä½“å˜é‡åˆå§‹åŒ–çš„æ—¶å€™ï¼Œå„ä¸ªæˆå‘˜é¡ºåºåˆå§‹åŒ–

æ¡ˆä¾‹ï¼š

```C
#include <stdio.h>

  //å®šä¹‰ç»“æ„ä½“ç±»å‹
struct stu{
  int id;
  char name[32];
  char sex;
  int age;
  //å®šä¹‰ç»“æ„ä½“å˜é‡ä¹‹å®šä¹‰ç»“æ„ä½“ç±»å‹çš„åŒæ—¶å®šä¹‰ç»“æ„ä½“å˜é‡
}zhangsan, lisi = {1002, "æå››", 'B', 25};

  //ä½¿ç”¨typedefå¯¹ç»“æ„ä½“ç±»å‹å–åˆ«å
typedef struct{
  int a;
  int b;
  char c;
}MSG;

int main(int argc, char *argv[])
{
//å®šä¹‰ç»“æ„ä½“å˜é‡ä¹‹ç±»å‹å®šä¹‰å®Œæ¯•ä¹‹åå®šä¹‰å˜é‡
  struct stu wangwu;
  //ç»“æ„ä½“å˜é‡çš„åˆå§‹åŒ–
  struct stu zhaoliu = {1001, "èµµå…­", 'B', 20};

  //å¦‚æœä½¿ç”¨typedefå¯¹ç»“æ„ä½“ç±»å‹å–åˆ«å
  //å°±æ— æ³•åœ¨å®šä¹‰ç±»å‹çš„åŒæ—¶å®šä¹‰ç»“æ„ä½“å˜é‡
  //åœ¨å®šä¹‰ç»“æ„ä½“å˜é‡çš„æ—¶å€™ä¸ç”¨åŠ struct
  MSG msg1, msg2 = {100, 200, 'w'};

  return 0;
}
```



#### 2.2 ç»“æ„ä½“å˜é‡çš„ä½¿ç”¨

ç»“æ„ä½“å˜é‡å¯¹æˆå‘˜è°ƒç”¨çš„æ–¹å¼ï¼š

```C
ç»“æ„ä½“å˜é‡.ç»“æ„ä½“æˆå‘˜
```

æ³¨æ„ï¼šè¿™åœ°æ–¹è¯´çš„ç»“æ„ä½“å˜é‡ä¸»è¦æŒ‡çš„æ˜¯æ™®é€šç»“æ„ä½“å˜é‡



**2.2.1 ç»“æ„ä½“å˜é‡çš„ç®€å•ä½¿ç”¨**

```C
#include <stdio.h>
#include <string.h>

struct stu{
  int id;
  char name[32];
  char sex;
  int age;
}zhangsan, lisi = {1002, "æå››", 'B', 25};

typedef struct{
  int a;
  int b;
  char c;
}MSG;

int main(int argc, char *argv[])
{
  struct stu wangwu;
  struct stu zhaoliu = {1001, "èµµå…­", 'B', 20};

  MSG msg1, msg2 = {100, 200, 'w'};

  //ç»“æ„ä½“å˜é‡çš„ä½¿ç”¨
  zhangsan.id = 1001;
  strcpy(zhangsan.name, "å¼ ä¸‰");
  zhangsan.sex = 'B';
  zhangsan.age = 18;
  printf("%d â€ %s â€ %c â€ %d\n", zhangsan.id, zhangsan.name,zhangsan.sex, zhangsan.age);
  printf("%d â€ %s â€ %c â€ %d\n", lisi.id, lisi.name,lisi.sex, lisi.age);
  printf("%d â€ %s â€ %c â€ %d\n", zhaoliu.id, zhaoliu.name,zhaoliu.sex, zhaoliu.age);
  printf("%d â€ %d â€ %c\n", msg2.a, msg2.b, msg2.c);

  return 0;
}
```

æ‰§è¡Œç»“æœ

```C
1001 - å¼ ä¸‰ - B - 18
1002 - æå›› - B - 25
1001 - èµµå…­ - B -20
100 - 200 - W
```



**Questionï¼š**

ä¸ºä»€ä¹ˆè¿™ä¸ªæ—¶å€™ä¸èƒ½ç›´æ¥ç»™yearèµ‹å€¼ï¼Ÿ

```C
typedef struct{ 
  int year;
  int month;
  int day;             
}BD;
```

**Answerï¼š**

ä¸Šè¿°ä»£ç å®šä¹‰äº†ä¸€ä¸ªç»“æ„ä½“ç±»å‹ `BD`ï¼Œä½†å®ƒä»…ä»…æ˜¯ä¸€ä¸ªç±»å‹çš„å£°æ˜ï¼Œæ²¡æœ‰åˆ›å»ºä»»ä½•å…·ä½“çš„å˜é‡ã€‚å› æ­¤ï¼Œæ‚¨ä¸èƒ½ç›´æ¥ç»™ `year`ã€`month` æˆ– `day` èµ‹å€¼ï¼Œå› ä¸ºè¿™äº›æˆå‘˜æ˜¯ç»“æ„ä½“å†…éƒ¨çš„æˆå‘˜ï¼Œéœ€è¦é€šè¿‡ç»“æ„ä½“å˜é‡æ¥è®¿é—®å’Œèµ‹å€¼ã€‚

æ‚¨å¯ä»¥ç†è§£ä¸º `BD` ç±»å‹æ˜¯ä¸€ç§ç”¨æˆ·è‡ªå®šä¹‰çš„æ•°æ®ç±»å‹ï¼Œç±»ä¼¼äº `int` æˆ–å…¶ä»–åŸºæœ¬æ•°æ®ç±»å‹ã€‚åœ¨ä½¿ç”¨å®ƒæ—¶ï¼Œéœ€è¦åˆ›å»ºå…·ä½“çš„å˜é‡ï¼Œç„¶åé€šè¿‡è¿™äº›å˜é‡æ¥æ“ä½œå…¶æˆå‘˜ã€‚

ä¾‹å¦‚ï¼Œåœ¨ä½¿ç”¨ `BD` ç±»å‹æ—¶ï¼Œæ‚¨éœ€è¦å…ˆåˆ›å»ºä¸€ä¸ª `BD` ç±»å‹çš„å˜é‡ï¼Œç„¶åé€šè¿‡è¯¥å˜é‡æ¥è®¿é—®å’Œèµ‹å€¼å…¶æˆå‘˜å˜é‡ `year`ã€`month` å’Œ `day`ï¼Œå°±åƒå‰é¢çš„ç¤ºä¾‹æ‰€ç¤ºã€‚

```C
BD birthday; // åˆ›å»ºä¸€ä¸ªBDç±»å‹çš„å˜é‡

birthday.year = 1990; // ç»™yearæˆå‘˜å˜é‡èµ‹å€¼
birthday.month = 9;   // ç»™monthæˆå‘˜å˜é‡èµ‹å€¼
birthday.day = 15;    // ç»™dayæˆå‘˜å˜é‡èµ‹å€¼
```

è¿™ä¸ªå˜é‡ `birthday` æ‰æ˜¯å…·ä½“å­˜å‚¨æ•°æ®çš„å®ä¾‹ï¼Œè€Œ `BD` åªæ˜¯å®šä¹‰äº†è¿™ç§ç±»å‹çš„æ•°æ®ç»“æ„ã€‚



**2.2.2 åœ¨ç»“æ„ä½“ä¸­åµŒå¥—ç»“æ„ä½“**

```C
//åœ¨ç»“æ„ä½“ä¸­åµŒå¥—ç»“æ„ä½“
typedef struct{
  int year;
  int month;
  int day;
}BD;

typedef struct{
  int id;
  char name[32];
  BD birthday;
}STU;

void test2()
{
  STU xiaoming;
  xiaoming.id = 1001;
  strcpy(xiaoming.name, "å°æ˜");
  //å¦‚æœç»“æ„ä½“ä¸­åµŒå¥—ç»“æ„ä½“ï¼Œèµ‹å€¼æ—¶æ‰¾åˆ°æœ€å†…å±‚çš„æˆå‘˜å†è¿›è¡Œèµ‹å€¼
  xiaoming.birthday.year = 2002;
  xiaoming.birthday.month = 12;
  xiaoming.birthday.day = 20;
  
  printf("%d â€ %s â€ %dâ€%dâ€%d\n", xiaoming.id, xiaoming.name,\
  xiaoming.birthday.year, xiaoming.birthday.month,\
  xiaoming.birthday.day);

  //åµŒå¥—çš„å½¢å¼å®šä¹‰å¹¶åˆå§‹åŒ–
  STU xiaoli = {1002, "å°ä¸½", 2000, 1, 1};
  printf("%d â€ %s â€ %dâ€%dâ€%d\n", xiaoli.id, xiaoli.name,\
  xiaoli.birthday.year, xiaoli.birthday.month,\
  xiaoli.birthday.day);
}
```

æ‰§è¡Œç»“æœ

```C
1001 - å°æ˜ - 2002-12-20
1002 - å°ä¸½ - 2000-1-1
```



#### 2.3 ç›¸åŒç±»å‹çš„ç»“æ„ä½“å˜é‡å¯ä»¥ç›¸äº’èµ‹å€¼

```C
#include <stdio.h>
#include <string.h>

struct stu{
  int id;
  char name[32];
  char sex;
  int age;
};

int main(int argc, char *argv[])
{
  struct stu zhangsan;
  zhangsan.id = 1001;
  strcpy(zhangsan.name, "å¼ ä¸‰");
  zhangsan.sex = 'B';
  zhangsan.age = 18;
  printf("%d â€ %s â€ %c â€ %d\n", zhangsan.id, zhangsan.name,\
    zhangsan.sex, zhangsan.age);

  //ç›¸åŒç±»å‹çš„ç»“æ„ä½“å˜é‡ä¹‹é—´å¯ä»¥ç›´æ¥èµ‹å€¼
  struct stu lisi;
  lisi = zhangsan;
  printf("%d â€ %s â€ %c â€ %d\n", lisi.id, lisi.name,\
    lisi.sex, lisi.age);

  return 0;
}
```

è¿™æ˜¯æˆ‘ä¼˜åŒ–åçš„ä»£ç ï¼š

```C
#include<stdio.h>

typedef struct
{
    int id;
    char name[32];
    char sex;
    int age;
}STU;

int main(int argc, char *argv[])
{
    STU zhangsan = {1001, "å¼ ä¸‰", 'B', 18};
    printf("%d - %s - %c - %d\n",zhangsan.id,zhangsan.name,\
            zhangsan.sex,zhangsan.age);

    //ç›¸åŒç±»å‹çš„ç»“æ„ä½“å˜é‡ä¹‹é—´å¯ä»¥ç›´æ¥èµ‹å€¼
    STU lisi;
    lisi = zhangsan;
    printf("%d - %s - %c - %d\n",lisi.id,lisi.name,\
            lisi.sex,lisi.age);
    
    return 0;
}
```

æ‰§è¡Œç»“æœ

```C
1001 - å¼ ä¸‰ - B - 18
1001 - å¼ ä¸‰ - B - 18
```



### ä¸‰ã€ç»“æ„ä½“æ•°ç»„

ç»“æ„ä½“æ•°ç»„æ˜¯ä¸ªæ•°ç»„ï¼Œç”±è‹¥å¹²ä¸ªç›¸åŒç±»å‹çš„ç»“æ„ä½“å˜é‡æ„æˆçš„é›†åˆ

**1ã€ç»“æ„ä½“æ•°ç»„çš„å®šä¹‰æ–¹æ³•**

```C
struct ç»“æ„ä½“ç±»å‹å æ•°ç»„å[å…ƒç´ ä¸ªæ•°];
```

ä¾‹å­ï¼š

```C
struct stu{
  int num;
  char name[20];
  char sex;
};
  struct stu edu[3];
  å®šä¹‰äº†ä¸€ä¸ªstruct stu ç±»å‹çš„ç»“æ„ä½“æ•°ç»„eduï¼Œ
  è¿™ä¸ªæ•°ç»„æœ‰3ä¸ªå…ƒç´ åˆ†åˆ«æ˜¯edu[0] ã€edu[1]ã€edu[2]
```

**2ã€ç»“æ„ä½“æ•°ç»„å…ƒç´ çš„å¼•ç”¨**

```C
æ•°ç»„å[ä¸‹æ ‡]
```

**3ã€ç»“æ„ä½“æ•°ç»„å…ƒç´ å¯¹æˆå‘˜çš„ä½¿ç”¨**

```C
æ•°ç»„å[ä¸‹æ ‡].æˆå‘˜
```

æ¡ˆä¾‹ï¼š

```C
#include <stdio.h>

typedef struct{
  int num;
  char name[20];
  float score;
}STU;

int main(int argc, char *argv[])
{
  //å®šä¹‰ä¸€ä¸ªç»“æ„ä½“æ•°ç»„
  STU edu[3] = {
    {101,"Lucy",78},
    {102,"Bob",59.5},
    {103,"Tom",85}
  };

  //è¾“å‡ºç»“æ„ä½“æ•°ç»„ä¸­çš„å…ƒç´ 
  int j;
  for(j = 0; j < 3; j++)
  {
    printf("%d â€ %s â€ %.2f\n", edu[j].num, edu[j].name,\
    edu[j].score);
  }

  int i;
  float sum=0;
  for(i = 0; i < 3; i++)
  {
    sum += edu[i].score;
  }

  printf("å¹³å‡æˆç»©ä¸º%.2f\n",sum / 3);

  return 0;
}
```

æ‰§è¡Œç»“æœ

```C
101 - Lucy - 78.00
102 - Bob - 59.50
103 - Tom - 85.00
å¹³å‡æˆç»©ä¸º74.17
```



### å››ã€ç»“æ„ä½“æŒ‡é’ˆ

å³ç»“æ„ä½“çš„åœ°å€ï¼Œç»“æ„ä½“å˜é‡å­˜æ”¾å†…å­˜ä¸­ï¼Œä¹Ÿæœ‰èµ·å§‹åœ°å€

å’±ä»¬å®šä¹‰ä¸€ä¸ªå˜é‡æ¥å­˜æ”¾è¿™ä¸ªåœ°å€ï¼Œé‚£è¿™ä¸ªå˜é‡å°±æ˜¯ç»“æ„ä½“æŒ‡é’ˆå˜é‡ã€‚

1ã€ç»“æ„ä½“æŒ‡é’ˆå˜é‡çš„å®šä¹‰æ–¹æ³•ï¼š

```C
struct ç»“æ„ä½“ç±»å‹å * ç»“æ„ä½“æŒ‡é’ˆå˜é‡å;
```

2ã€ç»“æ„ä½“æŒ‡é’ˆå˜é‡å¯¹æˆå‘˜çš„å¼•ç”¨

```C
 (*ç»“æ„ä½“æŒ‡é’ˆå˜é‡å).æˆå‘˜
  ç»“æ„ä½“æŒ‡é’ˆå˜é‡åâ€>æˆå‘˜
```

```C
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

struct stu{
    int id;
    char name[32];
    char sex;
    int age;
};

int main(int argc, char *argv[])
{
    //å®šä¹‰ä¸€ä¸ªç»“æ„ä½“æŒ‡é’ˆå˜é‡
    struct stu *s;
    //åœ¨å †åŒºå¼€è¾Ÿç»“æ„ä½“ç©ºé—´å¹¶å°†å…¶åœ°å€ä¿å­˜åœ¨ç»“æ„ä½“æŒ‡é’ˆå˜é‡ä¸­
    s = (struct stu *)malloc(sizeof(struct stu));

    s->id = 1001;
    strcpy(s->name, "å¼ ä¸‰");
    s->sex = 'B';
    s->age = 20;

    printf("%d - %s - %c - %d\n", s->id, s->name, s->sex, s->age);

    return 0;
}
```

æ‰§è¡Œç»“æœ

```C
 1001 - å¼ ä¸‰ - B - 20
```



### äº”ã€ç»“æ„ä½“å†…å­˜åˆ†é…é—®é¢˜

```C
#include<stdio.h>
struct stu{
  char sex;
  int age;
}lucy;
int main()
{
  printf("%d\n",sizeof(lucy));  //ç»“æœä¸º 8ï¼Ÿï¼Ÿï¼Ÿ
  return 0;
}
```

**å¼•è¨€ï¼š**

ç»“æ„ä½“å˜é‡å¤§å°æ˜¯å®ƒçš„æ‰€æœ‰æˆå‘˜ä¹‹å’Œï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆä¸Šè¿°ä¾‹å­ä¸­sizeof(lucy)ä¸æ˜¯1+4=5è€Œæ˜¯8å‘¢ï¼Ÿâ“

ç»“æ„ä½“å˜é‡ç©¶ç«Ÿæ˜¯æ€ä¹ˆåˆ†é…å†…å­˜çš„å‘¢ï¼Ÿâ“

è¯·çœ‹ä¸‹æ–‡ğŸ•µâ€(ä¾¦æ¢)



å®é™…ç»™ç»“æ„ä½“å˜é‡åˆ†é…å†…å­˜çš„æ—¶å€™ï¼Œæ˜¯è§„åˆ™çš„

**è§„åˆ™1ï¼šä»¥å¤šå°‘ä¸ªå­—èŠ‚ä¸ºå•ä½å¼€è¾Ÿå†…å­˜**

ç»™ç»“æ„ä½“å˜é‡åˆ†é…å†…å­˜çš„æ—¶å€™ï¼Œä¼šå»ç»“æ„ä½“å˜é‡ä¸­æ‰¾åŸºæœ¬ç±»å‹çš„æˆå‘˜

å“ªä¸ªåŸºæœ¬ç±»å‹çš„æˆå‘˜å å­—èŠ‚æ•°å¤šï¼Œå°±ä»¥å®ƒå¤§å¤§å°ä¸ºå•ä½å¼€è¾Ÿå†…å­˜,

åœ¨gccä¸­å‡ºç°äº†doubleç±»å‹çš„ä¾‹å¤–

(1)ï¼šæˆå‘˜ä¸­åªæœ‰charå‹æ•°æ® ï¼Œä»¥1å­—èŠ‚ä¸ºå•ä½å¼€è¾Ÿå†…å­˜ã€‚

(2)ï¼šæˆå‘˜ä¸­å‡ºç°äº†short ç±»å‹æ•°æ®ï¼Œæ²¡æœ‰æ›´å¤§å­—èŠ‚æ•°çš„åŸºæœ¬ç±»å‹æ•°æ®ã€‚ä»¥2å­—èŠ‚ä¸ºå•ä½å¼€è¾Ÿå†…å­˜

(3)ï¼šå‡ºç°äº†int ã€float æ²¡æœ‰æ›´å¤§å­—èŠ‚çš„åŸºæœ¬ç±»å‹æ•°æ®çš„æ—¶å€™ä»¥4å­—èŠ‚ä¸ºå•ä½å¼€è¾Ÿå†…å­˜ã€‚

(4)ï¼šå‡ºç°äº†doubleç±»å‹çš„æ•°æ®

æƒ…å†µ1ï¼š

åœ¨vcé‡Œï¼Œä»¥8å­—èŠ‚ä¸ºå•ä½å¼€è¾Ÿå†…å­˜ã€‚

æƒ…å†µ2ï¼š

åœ¨gccé‡Œï¼Œä»¥4å­—èŠ‚ä¸ºå•ä½å¼€è¾Ÿå†…å­˜ã€‚

æ— è®ºæ˜¯é‚£ç§ç¯å¢ƒï¼Œdoubleå‹å˜é‡ï¼Œå 8å­—èŠ‚ã€‚

(5)ï¼šå¦‚æœåœ¨ç»“æ„ä½“ä¸­å‡ºç°äº†æ•°ç»„ï¼Œæ•°ç»„å¯ä»¥çœ‹æˆå¤šä¸ªå˜é‡çš„é›†åˆã€‚

        å¦‚æœå‡ºç°æŒ‡é’ˆçš„è¯ï¼Œæ²¡æœ‰å å­—èŠ‚æ•°æ›´å¤§çš„ç±»å‹çš„ï¼Œä»¥4å­—èŠ‚ä¸ºå•ä½å¼€è¾Ÿå†…å­˜ã€‚

(6)ï¼šåœ¨å†…å­˜ä¸­å­˜å‚¨ç»“æ„ä½“æˆå‘˜çš„æ—¶å€™ï¼ŒæŒ‰å®šä¹‰çš„ç»“æ„ä½“æˆå‘˜çš„é¡ºåºå­˜å‚¨ã€‚



**è§„åˆ™2ï¼šå­—èŠ‚å¯¹é½**

(1)ï¼šchar    1å­—èŠ‚å¯¹é½ ï¼Œå³å­˜æ”¾charå‹çš„å˜é‡ï¼Œå†…å­˜å•å…ƒçš„ç¼–å·æ˜¯1çš„å€æ•°å³å¯ã€‚

(2)ï¼šshort    2å­—èŠ‚å¯¹é½ ï¼Œå³å­˜æ”¾short int å‹çš„å˜é‡ï¼Œèµ·å§‹å†…å­˜å•å…ƒçš„ç¼–å·æ˜¯2çš„å€æ•°å³å¯ã€‚

(3)ï¼šint     4å­—èŠ‚å¯¹é½ ï¼Œå³å­˜æ”¾int å‹çš„å˜é‡ï¼Œèµ·å§‹å†…å­˜å•å…ƒçš„ç¼–å·æ˜¯4çš„å€æ•°å³å¯ã€‚

(4)ï¼šlong     åœ¨32ä½å¹³å°ä¸‹ï¼Œ4å­—èŠ‚å¯¹é½ ï¼Œå³å­˜æ”¾long int å‹çš„å˜é‡ï¼Œèµ·å§‹å†…å­˜å•å…ƒçš„ç¼–å·æ˜¯4çš„å€æ•°å³å¯ã€‚

(5)ï¼šfloat     4å­—èŠ‚å¯¹é½ ï¼Œå³å­˜æ”¾float å‹çš„å˜é‡ï¼Œèµ·å§‹å†…å­˜å•å…ƒçš„ç¼–å·æ˜¯4çš„å€æ•°å³å¯ã€‚

(6)ï¼šdouble

a.vcç¯å¢ƒä¸‹

8å­—èŠ‚å¯¹é½ï¼Œå³å­˜æ”¾doubleå‹å˜é‡çš„èµ·å§‹åœ°å€ï¼Œå¿…é¡»æ˜¯8çš„å€æ•°ï¼Œdoubleå˜é‡å 8å­—èŠ‚ã€‚

b.gccç¯å¢ƒä¸‹

4å­—èŠ‚å¯¹é½ï¼Œå³å­˜æ”¾doubleå‹å˜é‡çš„èµ·å§‹åœ°å€ï¼Œå¿…é¡»æ˜¯4çš„å€æ•°ï¼Œdoubleå˜é‡å 8å­—èŠ‚ã€‚

æ³¨æ„ï¼š

å½“ç»“æ„ä½“æˆå‘˜ä¸­å‡ºç°æ•°ç»„çš„æ—¶å€™ï¼Œå¯ä»¥çœ‹æˆå¤šä¸ªå˜é‡ã€‚

å¼€è¾Ÿå†…å­˜çš„æ—¶å€™ï¼Œä»ä¸Šå‘ä¸‹ä¾æ¬¡æŒ‰æˆå‘˜åœ¨ç»“æ„ä½“ä¸­çš„ä½ç½®é¡ºåºå¼€è¾Ÿç©ºé—´



ä¾‹å­ï¼štempå  8 ä¸ªå­—èŠ‚

```C
#include<stdio.h>
struct stu{
  char a;
  short int b;
  int c;
}temp;
int main()
{
  printf("%d\n",sizeof(temp));
  printf("%p\n",&(temp.a));
  printf("%p\n",&(temp.b));
  printf("%p\n",&(temp.c));
  return 0;
}
```

è¿™æ˜¯å…·ä½“åˆ†é…å†…å­˜çš„å›¾ç¤º

![08_Struct_common-body_enumeration_image_6.png](https://testingcf.jsdelivr.net/gh/EddyCliff/ChartBed/Embedded_high-level_C_programming/08_Struct_common-body_enumeration_image%206.png)

ç»“æœåˆ†æï¼š

a çš„åœ°å€å’Œ b çš„åœ°å€å·® 2 ä¸ªå­—èŠ‚

b çš„åœ°å€å’Œ c çš„åœ°å€å·® 2 ä¸ªå­—èŠ‚



ä¾‹å­ï¼štemp çš„å¤§å°ä¸º 12 ä¸ªå­—èŠ‚

```C
struct stu{
  char a;
  int c;
  short int b;
}temp;
```

![08_Struct_common-body_enumeration_image_7.png](https://testingcf.jsdelivr.net/gh/EddyCliff/ChartBed/Embedded_high-level_C_programming/08_Struct_common-body_enumeration_image%207.png)

ç»“æœåˆ†æï¼š

a å’Œ c çš„åœ°å€å·® 4 ä¸ªå­—èŠ‚

c å’Œ b çš„åœ°å€å·® 4 ä¸ªå­—èŠ‚



ä¾‹å­ï¼š

```C
struct stu{
  char a;
  double b;
}temp;
```

ç»“æœåˆ†æ;

åœ¨ vc ä¸­å  16 ä¸ªå­—èŠ‚ a å’Œ b çš„åœ°å€å·® 8 ä¸ªå­—èŠ‚

åœ¨ gcc ä¸­å  12 ä¸ªå­—èŠ‚ a å’Œ b çš„åœ°å€å·® 4 ä¸ªå­—èŠ‚



ä¾‹å­ï¼š

```C
struct stu{
  int num;
  int age;
}lucy;
  8å­—èŠ‚

struct stu{
  char sex;
  int age;
}lucy;
  8å­—èŠ‚

struct stu{
  char a;
  short int b;
  int c;
}temp;
  8å­—èŠ‚

struct stu{
  char a;
  int c;
  short int b;
}temp;
  12å­—èŠ‚

struct stu{
  char buf[10];
  int a;
}temp;
  16å­—èŠ‚
  
struct stu{
  char a;
  double b;
};
  12å­—èŠ‚
```

ä¸ºä»€ä¹ˆè¦æœ‰å­—èŠ‚å¯¹é½ï¼Ÿ

ç”¨ç©ºé—´æ¥æ¢æ—¶é—´ï¼Œæé«˜cpuè¯»å–æ•°æ®çš„æ•ˆç‡



çœ‹åˆ°è¿™é‡Œçš„è¯ï¼Œæ­å–œä½ ï¼Œå·²ç»æŒæ¡äº†ç»“æ„ä½“çš„åŸºæœ¬çŸ¥è¯†ã€‚ğŸ…

æœ¬ç« å·²è¿‡å®Œ1/3ï¼Œä¸‹ä¸€èŠ‚ï¼Œæˆ‘ä»¬å°†å¯¹ã€Šä½æ®µã€‹è¿›è¡Œå­¦ä¹ ã€‚â©



### å…­ã€ä½æ®µ

**å¼•è¨€ï¼š**

ä½æ®µæ˜¯ååº•å±‚çš„å†…å®¹

ç›®å‰åšåº”ç”¨å±‚çš„è¯åªéœ€äº†è§£å³å¯

æˆ‘ç›®å‰ä¹Ÿä¸çŸ¥é“è¿™æ˜¯åšä»€ä¹ˆçš„ğŸ˜¶â€ğŸŒ«ï¸(è¿·èŒ«)



ä¸€ã€ä½æ®µ

åœ¨ç»“æ„ä½“ä¸­ï¼Œä»¥ä½ä¸ºå•ä½çš„æˆå‘˜ï¼Œå’±ä»¬ç§°ä¹‹ä¸ºä½æ®µ(ä½åŸŸ)ã€‚

struct packed_data{

unsigned int a:2;

unsigned int b:6;

unsigned int c:4;

unsigned int d:4;

unsigned int i;

} data;

![08_Struct_common-body_enumeration_image_8.png](https://testingcf.jsdelivr.net/gh/EddyCliff/ChartBed/Embedded_high-level_C_programming/08_Struct_common-body_enumeration_image%208.png)

æ³¨æ„ï¼šä¸èƒ½å¯¹ä½æ®µæˆå‘˜å–åœ°å€

```C
#include<stdio.h>
struct packed_data{
  unsigned int a:2;
  unsigned int b:6;
  unsigned int c:4;
  unsigned int d:4;
  unsigned int i;
} data;

int main()
{
  printf("%d\n",sizeof(data));
  printf("%p\n",&data);
  printf("%p\n",&(data.i));
  return 0;
}
```



**ä½æ®µæ³¨æ„ï¼š**

1ã€å¯¹äºä½æ®µæˆå‘˜çš„å¼•ç”¨å¦‚ä¸‹ï¼š

data.a =2

èµ‹å€¼æ—¶ï¼Œä¸è¦è¶…å‡ºä½æ®µå®šä¹‰çš„èŒƒå›´;

å¦‚æ®µæˆå‘˜aå®šä¹‰ä¸º2ä½ï¼Œæœ€å¤§å€¼ä¸º3,å³ï¼ˆ11ï¼‰2

æ‰€ä»¥data.a =5ï¼Œå°±ä¼šå–5çš„ä½ä¸¤ä½è¿›è¡Œèµ‹å€¼ 101

2ã€ä½æ®µæˆå‘˜çš„ç±»å‹å¿…é¡»æŒ‡å®šä¸ºæ•´å½¢æˆ–å­—ç¬¦å‹

3ã€ä¸€ä¸ªä½æ®µå¿…é¡»å­˜æ”¾åœ¨ä¸€ä¸ªå­˜å‚¨å•å…ƒä¸­ï¼Œä¸èƒ½è·¨ä¸¤ä¸ªå•å…ƒ

ç¬¬ä¸€ä¸ªå•å…ƒç©ºé—´ä¸èƒ½å®¹çº³ä¸‹ä¸€ä¸ªä½æ®µï¼Œåˆ™è¯¥ç©ºé—´ä¸ç”¨ï¼Œè€Œä»ä¸‹ä¸€ä¸ªå•å…ƒèµ·å­˜æ”¾è¯¥ä½æ®µã€‚



**ä½æ®µçš„å­˜å‚¨å•å…ƒï¼š**

(1)ï¼šcharå‹ä½æ®µ å­˜å‚¨å•å…ƒæ˜¯1ä¸ªå­—èŠ‚

(2)ï¼šshort intå‹çš„ä½æ®µå­˜å‚¨å•å…ƒæ˜¯2ä¸ªå­—èŠ‚

(3)ï¼šintçš„ä½æ®µï¼Œå­˜å‚¨å•å…ƒæ˜¯4å­—èŠ‚

(4)ï¼šlong intçš„ä½æ®µï¼Œå­˜å‚¨å•å…ƒæ˜¯4å­—èŠ‚

```C
struct stu{
  char a:7;
  char b:7;
  char c:2;
}temp;//å 3å­—èŠ‚ï¼Œbä¸èƒ½è·¨ å­˜å‚¨å•å…ƒå­˜å‚¨
```

```C
#include<stdio.h>
struct stu{
  char a:7;
  char b:7;
  char c:2;
}temp;
int main()
{
  printf("%d\n",sizeof(temp));
  return 0;
}
  ç»“æœä¸ºï¼š3 ï¼Œè¯æ˜ä½æ®µä¸èƒ½è·¨å…¶å­˜å‚¨å•å…ƒå­˜å‚¨
```

æ³¨æ„ï¼šä¸èƒ½ å– temp.bçš„åœ°å€ï¼Œå› ä¸ºbå¯èƒ½ä¸å¤Ÿ1å­—èŠ‚ï¼Œä¸èƒ½å–åœ°å€ã€‚



4ã€ä½æ®µçš„é•¿åº¦ä¸èƒ½å¤§äºå­˜å‚¨å•å…ƒçš„é•¿åº¦

(1)ï¼šcharå‹ä½æ®µä¸èƒ½å¤§äº8ä½

(2)ï¼šshort intå‹ä½æ®µä¸èƒ½å¤§äº16ä½

(3)ï¼šintçš„ä½æ®µï¼Œä½æ®µä¸èƒ½å¤§äº32ä½

(4)ï¼šlong intçš„ä½æ®µï¼Œä½æ®µä¸èƒ½å¤§äº32ä½

```C
#include<stdio.h>
struct stu{
  char a:9;
  char b:7;
  char c:2;
}temp;

int main()
{
  printf("%d\n",sizeof(temp));
  return 0;
}
  åˆ†æï¼š
  ç¼–è¯‘å‡ºé”™ï¼Œä½æ®µaä¸èƒ½å¤§äºå…¶å­˜å‚¨å•å…ƒçš„å¤§å°
```



5ã€å¦‚ä¸€ä¸ªæ®µè¦ä»å¦ä¸€ä¸ªå­˜å‚¨å•å…ƒå¼€å§‹ï¼Œå¯ä»¥å®šä¹‰ï¼š

unsigned char a:1;

unsigned char b:2;

unsigned char :0;

unsigned char c:3;(å¦ä¸€ä¸ªå•å…ƒ)

ç”±äºç”¨äº†é•¿åº¦ä¸º0çš„ä½æ®µï¼Œå…¶ä½œç”¨æ˜¯ä½¿ä¸‹ä¸€ä¸ªä½æ®µä»ä¸‹ä¸€ä¸ªå­˜å‚¨å•å…ƒå¼€å§‹å­˜æ”¾

å°†aã€bå­˜å‚¨åœ¨ä¸€ä¸ªå­˜å‚¨å•å…ƒä¸­ï¼Œcå¦å­˜åœ¨ä¸‹ä¸€ä¸ªå•å…ƒ

```C
#include<stdio.h>
struct m_type{
  unsigned char a:1;
  unsigned char b:2;
  unsigned char :0;
  unsigned char c:3;
};
int main()
{
  struct m_type temp;
  printf("%d\n",sizeof(temp));
  return 0;
}
```



6ã€å¯ä»¥å®šä¹‰æ— æ„ä¹‰ä½æ®µ,å¦‚ï¼š

unsigned a: 1;

unsigned : 2;

unsigned b: 3;

```C
struct data{
  char a:1;
  char b:1;
  char c:1;
  char d:1;
  char e:1;
  char f:1;
  char g:1;
  char h:1;
}temp;
int main()
{
  char p0;
  //p0=0x01;// 0000 0001
  temp.a=1;
  //p0=temp;//é”™çš„ï¼Œç±»å‹ä¸åŒ¹é…
  //p0=(char)temp;//é”™çš„ï¼Œç¼–è¯‘å™¨ä¸å…è®¸å°†ç»“æ„ä½“å˜é‡ï¼Œå¼ºåˆ¶è½¬æˆåŸºæœ¬ç±»å‹çš„ã€‚
  p0 = *((char *)(&temp));
}
```

â€‹

æŒ‡å®šå¯¹é½åŸåˆ™ï¼š

ä½¿ç”¨#pragma packæ”¹å˜é»˜è®¤å¯¹å…¶åŸåˆ™

æ ¼å¼ï¼š

#pragma pack (value)æ—¶çš„æŒ‡å®šå¯¹é½å€¼valueã€‚

ğŸ“¢ è¿™ä¸ªéƒ¨åˆ†å¯ä»¥å…ˆä¸å­¦ä¹ ï¼Œä¸€èˆ¬æƒ…å†µä¸‹éƒ½æ˜¯ç”¨çš„é»˜è®¤å¯¹é½åŸåˆ™



### ä¸ƒã€å…±ç”¨ä½“

1ï¼šå…±ç”¨ä½“å’Œç»“æ„ä½“ç±»ä¼¼ï¼Œä¹Ÿæ˜¯ä¸€ç§æ„é€ ç±»å‹çš„æ•°æ®ç»“æ„ã€‚

- æ—¢ç„¶æ˜¯æ„é€ ç±»å‹çš„ï¼Œå’±ä»¬å¾—å…ˆå®šä¹‰å‡ºç±»å‹ï¼Œç„¶åç”¨ç±»å‹å®šä¹‰å˜é‡ã€‚

- å®šä¹‰å…±ç”¨ä½“ç±»å‹çš„æ–¹æ³•å’Œç»“æ„ä½“éå¸¸ç›¸ä¼¼ï¼ŒæŠŠstruct æ”¹æˆunion å°±å¯ä»¥äº†ã€‚

- åœ¨è¿›è¡ŒæŸäº›ç®—æ³•çš„æ—¶å€™ï¼Œéœ€è¦ä½¿å‡ ç§ä¸åŒç±»å‹çš„å˜é‡å­˜åˆ°åŒä¸€æ®µå†…å­˜å•å…ƒä¸­ï¼Œå‡ ä¸ªå˜é‡æ‰€ä½¿ç”¨ç©ºé—´ç›¸äº’é‡å ã€‚

    è¿™ç§å‡ ä¸ªä¸åŒçš„å˜é‡å…±åŒå ç”¨ä¸€æ®µå†…å­˜çš„ç»“æ„ï¼Œåœ¨Cè¯­è¨€ä¸­ï¼Œè¢«ç§°ä½œâ€œå…±ç”¨ä½“â€ç±»å‹ç»“æ„

- å…±ç”¨ä½“æ‰€æœ‰æˆå‘˜å æœ‰åŒä¸€æ®µåœ°å€ç©ºé—´

- å…±ç”¨ä½“çš„å¤§å°æ˜¯å…¶å å†…å­˜é•¿åº¦æœ€å¤§çš„æˆå‘˜çš„å¤§å°



**å…±ç”¨ä½“çš„ç‰¹ç‚¹ï¼š**

1ã€åŒä¸€å†…å­˜æ®µå¯ä»¥ç”¨æ¥å­˜æ”¾å‡ ç§ä¸åŒç±»å‹çš„æˆå‘˜ï¼Œä½†æ¯ä¸€ç¬æ—¶åªæœ‰ä¸€ç§èµ·ä½œç”¨

2ã€å…±ç”¨ä½“å˜é‡ä¸­èµ·ä½œç”¨çš„æˆå‘˜æ˜¯æœ€åä¸€æ¬¡å­˜æ”¾çš„æˆå‘˜ï¼Œåœ¨å­˜å…¥ä¸€ä¸ªæ–°çš„æˆå‘˜ååŸæœ‰çš„

æˆå‘˜çš„å€¼ä¼šè¢«è¦†ç›–

3ã€å…±ç”¨ä½“å˜é‡çš„åœ°å€å’Œå®ƒçš„å„æˆå‘˜çš„åœ°å€éƒ½æ˜¯åŒä¸€åœ°å€

4ã€å…±ç”¨ä½“å˜é‡çš„åˆå§‹åŒ–union data a={123}; åˆå§‹åŒ–å…±ç”¨ä½“ä¸ºç¬¬ä¸€ä¸ªæˆå‘˜

```C
#include <stdio.h>

  //å®šä¹‰ä¸€ä¸ªå…±ç”¨ä½“
union un{
  int a;
  int b;
  int c;
};

int main(int argc, char *argv[])
{
  //å®šä¹‰å…±ç”¨ä½“å˜é‡
  union un myun;
  myun.a = 100;
  myun.b = 200;
  myun.c = 300;

  printf("a = %d, b = %d, c = %d\n", myun.a, myun.b, myun.c);

  return 0;
}
```

æ‰§è¡Œç»“æœ

```C
a = 300, b = 300, c = 300
```



### å…«ã€æšä¸¾

å°†å˜é‡çš„å€¼ä¸€ä¸€åˆ—ä¸¾å‡ºæ¥ï¼Œå˜é‡çš„å€¼åªé™äºåˆ—ä¸¾å‡ºæ¥çš„å€¼çš„èŒƒå›´å†…

æšä¸¾ç±»å‹ä¹Ÿæ˜¯ä¸ªæ„é€ ç±»å‹çš„



1ã€æšä¸¾ç±»å‹çš„å®šä¹‰

```C
enum æšä¸¾ç±»å‹å{
  æšä¸¾å€¼åˆ—è¡¨ï¼›
};
```

åœ¨æšä¸¾å€¼è¡¨ä¸­åº”åˆ—å‡ºæ‰€æœ‰å¯ç”¨å€¼,ä¹Ÿç§°ä¸ºæšä¸¾å…ƒç´ 

æšä¸¾å˜é‡ä»…èƒ½å–æšä¸¾å€¼æ‰€åˆ—å…ƒç´ 



2ã€æšä¸¾å˜é‡çš„å®šä¹‰æ–¹æ³•

```C
enum æšä¸¾ç±»å‹å æšä¸¾å˜é‡å;
```

â‘  æšä¸¾å€¼æ˜¯å¸¸é‡,ä¸èƒ½åœ¨ç¨‹åºä¸­ç”¨èµ‹å€¼è¯­å¥å†å¯¹å®ƒèµ‹å€¼

ä¾‹å¦‚ï¼šsun=5; mon=2; sun=mon; éƒ½æ˜¯é”™è¯¯çš„.

â‘¡ æšä¸¾å…ƒç´ æœ¬èº«ç”±ç³»ç»Ÿå®šä¹‰äº†ä¸€ä¸ªè¡¨ç¤ºåºå·çš„æ•°å€¼

é»˜è®¤æ˜¯ä»0å¼€å§‹é¡ºåºå®šä¹‰ä¸º0ï¼Œ1ï¼Œ2â€¦

å¦‚åœ¨weekä¸­ï¼Œmonå€¼ä¸º0ï¼Œtueå€¼ä¸º1ï¼Œ â€¦,sunå€¼ä¸º6

â‘¢ å¯ä»¥æ”¹å˜æšä¸¾å€¼çš„é»˜è®¤å€¼ï¼šå¦‚

```C
enum week //æšä¸¾ç±»å‹
{
  mon=3ï¼Œtueï¼Œwedï¼Œthuï¼Œfri=4ï¼Œsat,sun
};

  mon=3 tue=4,ä»¥æ­¤ç±»æ¨
  fri=4 ä»¥æ­¤ç±»æ¨
```

æ³¨æ„ï¼šåœ¨å®šä¹‰æšä¸¾ç±»å‹çš„æ—¶å€™æšä¸¾å…ƒç´ å¯ä»¥ç”¨ç­‰å·ç»™å®ƒèµ‹å€¼ï¼Œç”¨æ¥ä»£è¡¨å…ƒç´ ä»å‡ å¼€å§‹ç¼–å·

åœ¨ç¨‹åºä¸­ï¼Œä¸èƒ½å†æ¬¡å¯¹æšä¸¾å…ƒç´ èµ‹å€¼ï¼Œå› ä¸ºæšä¸¾å…ƒç´ æ˜¯å¸¸é‡ã€‚

```C
#include <stdio.h>

//å®šä¹‰ä¸€ä¸ªæšä¸¾ç±»å‹
enum week
{
    mon=8, tue, wed, thu=2, fri, sat, sun
};

int main(int argc, char *argv[])
{
  //å®šä¹‰æšä¸¾ç±»å‹çš„å˜é‡
  enum week day = mon;
  printf("day = %d\n", day);
  
  day = fri;
  printf("day = %d\n", day);

  return 0;
}
```

æ‰§è¡Œç»“æœ

```C
day = 8
day = 3
```



**å½©è›‹ï¼š**ğŸ

æˆ‘æ—¶å¸¸æƒ³ï¼Œåšå­¦é—®ï¼Œåšäº‹ä¸šï¼Œåœ¨äººç”Ÿä¸­éƒ½åªèƒ½ç®—æ˜¯ç¬¬äºŒæ¡©äº‹ã€‚äººç”Ÿç¬¬ä¸€æ¡©äº‹æ˜¯ç”Ÿæ´»ã€‚æˆ‘æ‰€è°“çš„â€œç”Ÿæ´»â€æ˜¯â€œé¢†ç•¥â€ï¼Œæ˜¯â€œåŸ¹å…»ç”Ÿæœºâ€ã€‚å‡è‹¥ä¸ºå­¦é—®ä¸ºäº‹ä¸šè€Œå¿˜å´ç”Ÿæ´»ï¼Œé‚£ç§å­¦é—®ï¼Œäº‹ä¸šåœ¨äººç”Ÿä¸­ä¾¿å¤±å»å…¶çœŸæ­£æ„ä¹‰ä¸ä»·å€¼ã€‚

- æœ±å…‰æ½œã€Šç»™é’å¹´çš„åäºŒå°ä¿¡ã€‹

æ­å–œä½ ğŸ‰ï¼Œå®Œæˆäº†å¯¹ç¬¬å…«ç« ã€Šç»“æ„ä½“ï¼Œå…±ç”¨ä½“ï¼Œæšä¸¾ã€‹éƒ¨åˆ†çš„å­¦ä¹ ï¼Œä¸‹ä¸€ç« æˆ‘ä»¬å°†å­¦ä¹ é“¾è¡¨ã€‚

â©ç¬¬ä¹ç« ã€Šé“¾è¡¨ã€‹



